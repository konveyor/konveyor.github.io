<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Customize generated Dockerfile and built-in transformer behavior | Konveyor</title>
<meta name=description content="In this tutorial, Move2Kube will add a custom Dockerfile, and a custom file.
Create an empty workspace directory named workspace and make it the current working directory. Assume all commands are executed within this directory. $ mkdir workspace && cd workspace Use the enterprise-app as input for this flow. $ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos $ ls src README.md	config-utils	customers	docs	frontend	gateway	orders Run Move2Kube without any customization. If the Dockerfile is generated for the frontend app, it uses registry.access.redhat.com/ubi8/nodejs-12 as the base image. There are no scripts named start-nodejs.sh in the frontend service directory. The Kubernetes YAMLs are generated in myproject/deploy/yamls directory. $ move2kube transform -s src/ --qa-skip && ls myproject/source/frontend && cat myproject/source/frontend/Dockerfile && ls myproject/deploy && rm -rf myproject Dockerfile	README.md	dr-surge.js	manifest.yml	package-lock.json	server.js	stories	test-setup.js	webpack.common.js	webpack.prod.js LICENSE	__mocks__	jest.config.js	nodemon.json	package.json	src	stylePaths.js	tsconfig.json	webpack.dev.js FROM registry.access.redhat.com/ubi8/nodejs-12 COPY . . RUN npm install RUN npm run build EXPOSE 8080 CMD npm run start cicd	compose	knative	knative-parameterized	yamls	yamls-parameterized The next steps will:"><meta property="og:url" content="http://konveyor.io/docs/move2kube/tutorials/customizeoutput/customgendockerfile/"><meta property="og:site_name" content="Konveyor"><meta property="og:title" content="Customize generated Dockerfile and built-in transformer behavior"><meta property="og:description" content="In this tutorial, Move2Kube will add a custom Dockerfile, and a custom file.
Create an empty workspace directory named workspace and make it the current working directory. Assume all commands are executed within this directory. $ mkdir workspace && cd workspace Use the enterprise-app as input for this flow. $ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos $ ls src README.md	config-utils	customers	docs	frontend	gateway	orders Run Move2Kube without any customization. If the Dockerfile is generated for the frontend app, it uses registry.access.redhat.com/ubi8/nodejs-12 as the base image. There are no scripts named start-nodejs.sh in the frontend service directory. The Kubernetes YAMLs are generated in myproject/deploy/yamls directory. $ move2kube transform -s src/ --qa-skip && ls myproject/source/frontend && cat myproject/source/frontend/Dockerfile && ls myproject/deploy && rm -rf myproject Dockerfile	README.md	dr-surge.js	manifest.yml	package-lock.json	server.js	stories	test-setup.js	webpack.common.js	webpack.prod.js LICENSE	__mocks__	jest.config.js	nodemon.json	package.json	src	stylePaths.js	tsconfig.json	webpack.dev.js FROM registry.access.redhat.com/ubi8/nodejs-12 COPY . . RUN npm install RUN npm run build EXPOSE 8080 CMD npm run start cicd	compose	knative	knative-parameterized	yamls	yamls-parameterized The next steps will:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2022-08-04T19:21:31-06:00"><meta property="article:modified_time" content="2022-08-04T19:21:31-06:00"><meta itemprop=name content="Customize generated Dockerfile and built-in transformer behavior"><meta itemprop=description content="In this tutorial, Move2Kube will add a custom Dockerfile, and a custom file.
Create an empty workspace directory named workspace and make it the current working directory. Assume all commands are executed within this directory. $ mkdir workspace && cd workspace Use the enterprise-app as input for this flow. $ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos $ ls src README.md	config-utils	customers	docs	frontend	gateway	orders Run Move2Kube without any customization. If the Dockerfile is generated for the frontend app, it uses registry.access.redhat.com/ubi8/nodejs-12 as the base image. There are no scripts named start-nodejs.sh in the frontend service directory. The Kubernetes YAMLs are generated in myproject/deploy/yamls directory. $ move2kube transform -s src/ --qa-skip && ls myproject/source/frontend && cat myproject/source/frontend/Dockerfile && ls myproject/deploy && rm -rf myproject Dockerfile	README.md	dr-surge.js	manifest.yml	package-lock.json	server.js	stories	test-setup.js	webpack.common.js	webpack.prod.js LICENSE	__mocks__	jest.config.js	nodemon.json	package.json	src	stylePaths.js	tsconfig.json	webpack.dev.js FROM registry.access.redhat.com/ubi8/nodejs-12 COPY . . RUN npm install RUN npm run build EXPOSE 8080 CMD npm run start cicd	compose	knative	knative-parameterized	yamls	yamls-parameterized The next steps will:"><meta itemprop=datePublished content="2022-08-04T19:21:31-06:00"><meta itemprop=dateModified content="2022-08-04T19:21:31-06:00"><meta itemprop=wordCount content="724"><meta name=twitter:card content="summary"><meta name=twitter:title content="Customize generated Dockerfile and built-in transformer behavior"><meta name=twitter:description content="In this tutorial, Move2Kube will add a custom Dockerfile, and a custom file.
Create an empty workspace directory named workspace and make it the current working directory. Assume all commands are executed within this directory. $ mkdir workspace && cd workspace Use the enterprise-app as input for this flow. $ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos $ ls src README.md	config-utils	customers	docs	frontend	gateway	orders Run Move2Kube without any customization. If the Dockerfile is generated for the frontend app, it uses registry.access.redhat.com/ubi8/nodejs-12 as the base image. There are no scripts named start-nodejs.sh in the frontend service directory. The Kubernetes YAMLs are generated in myproject/deploy/yamls directory. $ move2kube transform -s src/ --qa-skip && ls myproject/source/frontend && cat myproject/source/frontend/Dockerfile && ls myproject/deploy && rm -rf myproject Dockerfile	README.md	dr-surge.js	manifest.yml	package-lock.json	server.js	stories	test-setup.js	webpack.common.js	webpack.prod.js LICENSE	__mocks__	jest.config.js	nodemon.json	package.json	src	stylePaths.js	tsconfig.json	webpack.dev.js FROM registry.access.redhat.com/ubi8/nodejs-12 COPY . . RUN npm install RUN npm run build EXPOSE 8080 CMD npm run start cicd	compose	knative	knative-parameterized	yamls	yamls-parameterized The next steps will:"><link rel=preload href=/scss/main.min.77559d28d58beff407c93ec03404ec14c991ebbb32362c90361ab4da92ac41f1.css as=style integrity="sha256-d1WdKNWL7/QHyT7ANATsFMmR67syNiyQNhq02pKsQfE=" crossorigin=anonymous><link href=/scss/main.min.77559d28d58beff407c93ec03404ec14c991ebbb32362c90361ab4da92ac41f1.css rel=stylesheet integrity="sha256-d1WdKNWL7/QHyT7ANATsFMmR67syNiyQNhq02pKsQfE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg width="575.19pt" height="221.79pt" version="1.2" viewBox="0 0 575.19 221.79"><g transform="translate(-9.3672,-9.1211)"><path d="m174.6 82.258h38.348v14.941H174.6z"/><path d="m246.31 82.258h38.348v14.941H246.31z"/><path d="m209.96 14.031h38.348v14.941H209.96z"/></g><path d="m247.85 78.121h15.727c1.418.0 2.5586 1.1367 2.5586 2.5547s-1.1406 2.5586-2.5586 2.5586H247.85c-1.418.0-2.5586-1.1406-2.5586-2.5586s1.1406-2.5547 2.5586-2.5547m-70.941.0h15.727c1.4141.0 2.5586 1.1367 2.5586 2.5547s-1.1445 2.5586-2.5586 2.5586h-15.727c-1.4141.0-2.5586-1.1406-2.5586-2.5586s1.1445-2.5547 2.5586-2.5547m47.938-8.7539c-.8789.0-1.5859.70703-1.5859 1.582v61.738c0 .87891.70703 1.5859 1.5859 1.5859h61.734c.8789.0 1.582-.71094 1.582-1.5859v-61.738c0-.875-.70313-1.582-1.582-1.582zm-70.945.0c-.875.0-1.5781.70703-1.5781 1.582v61.738c0 .87891.70312 1.5859 1.5781 1.5859h61.742c.875.0 1.5781-.71094 1.5781-1.5859v-61.738c0-.875-.70312-1.582-1.5781-1.582zm58.477-60.613h15.727c1.418.0 2.5586 1.1367 2.5586 2.5547s-1.1406 2.5586-2.5586 2.5586h-15.727c-1.418.0-2.5547-1.1406-2.5547-2.5586s1.1367-2.5547 2.5547-2.5547m-23.004-8.7539c-.87891.0-1.5859.70703-1.5859 1.582v61.738c0 .875.70703 1.5781 1.5859 1.5781h61.738c.875.0 1.582-.70312 1.582-1.5781v-61.738c0-.875-.70703-1.582-1.582-1.582z" fill="#b09454"/><g transform="translate(-9.3672,-9.1211)" fill="#353688"><path d="m110.98 164c13.109.0 23.523 10.414 23.523 23.523.0 13.113-10.414 23.523-23.523 23.523s-23.523-10.41-23.523-23.523c0-13.109 10.414-23.523 23.523-23.523m0-19.871c-23.848.0-43.395 19.547-43.395 43.395.0 23.852 19.547 43.395 43.395 43.395 23.852.0 43.398-19.543 43.398-43.395.0-23.848-19.547-43.395-43.398-43.395"/><path d="m9.3672 224.48v-73.914h20.301v28.109l22.488-28.109h22.902l-26.859 33.105 28.734 40.809h-23.32l-18.324-27.172-5.6211 5.832v21.34z"/><path d="m181.01 188.14v36.332h-20.301v-73.914h15.824l29.672 37.582v-37.582h20.301v73.914h-16.137z"/><path d="m253.47 150.56 14.469 48.41 14.266-48.41h21.34l-27.172 73.914H259.51l-27.484-73.914z"/><path d="m361.84 206.78v17.695h-52.676v-73.914h51.742v17.699h-31.441v10.41h26.859v16.449h-26.859v11.66z"/><path d="m386.3 150.56 13.223 31.961 13.531-31.961h22.07l-25.504 49.449v24.465h-20.195v-24.672l-25.09-49.242z"/><path d="m541.04 184.09h12.805c1.25.0 2.3945-.69532 3.4375-2.082 1.1094-1.3906 1.6641-3.332 1.6641-5.832.0-2.5664-.625-4.5117-1.875-5.8281-1.2461-1.3867-2.4961-2.082-3.7461-2.082h-12.285zm-20.301 40.391v-73.914h33.938c3.6094.0 6.9414.76562 9.9961 2.293 3.0547 1.457 5.6562 3.3984 7.8086 5.8281 2.2188 2.3594 3.9531 5.1016 5.2031 8.2227 1.25 3.0547 1.875 6.1445 1.875 9.2656.0 4.3047-.9375 8.3281-2.8125 12.078-1.8711 3.6797-4.4766 6.6953-7.8086 9.0586l15.617 27.168h-22.902l-13.012-22.695h-7.6016v22.695z"/><path d="m471.77 164c13.109.0 23.523 10.414 23.523 23.523.0 13.113-10.414 23.523-23.523 23.523s-23.523-10.41-23.523-23.523c0-13.109 10.414-23.523 23.523-23.523m0-19.871c-23.848.0-43.395 19.547-43.395 43.395.0 23.852 19.547 43.395 43.395 43.395 23.852.0 43.398-19.543 43.398-43.395.0-23.848-19.547-43.395-43.398-43.395"/></g></svg></span><span class=navbar-brand__name>Konveyor</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class="nav-item sub-menu dropdown"><div class=dropdown><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Components</span></a><ul class="dropdown-menu dropdown-menu-end -bg-primary"><li><a class=dropdown-item href=/components/konveyor-hub>Konveyor Hub</a></li><li><a class=dropdown-item href=/components/konveyor-cli>Konveyor CLI</a></li><li><a class=dropdown-item href=/components/kai>Konveyor AI</a></li></ul></div></li><li class=nav-item><a class=nav-link href=/docs><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/docs/konveyor/contributetokonveyor/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=/ecosystem><span>Ecosystem</span></a></li><li class=nav-item><a class=nav-link href=/blog><span>Blog</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ce7d4680676f0d330b086cf41b0fa7de.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ce7d4680676f0d330b086cf41b0fa7de.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Konveyor Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskonveyor-li><input type=checkbox id=m-docskonveyor-check>
<label for=m-docskonveyor-check><a href=/docs/konveyor/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docskonveyor><span>Konveyor</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyorcontributetokonveyor-li><input type=checkbox id=m-docskonveyorcontributetokonveyor-check>
<label for=m-docskonveyorcontributetokonveyor-check><a href=/docs/konveyor/contributetokonveyor/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyorcontributetokonveyor><span>Contributing To Konveyor</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyoradmintasks-li><input type=checkbox id=m-docskonveyoradmintasks-check>
<label for=m-docskonveyoradmintasks-check><a href=/docs/konveyor/admintasks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyoradmintasks><span>Administrator view tasks</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyorviews-li><input type=checkbox id=m-docskonveyorviews-check>
<label for=m-docskonveyorviews-check><a href=/docs/konveyor/views/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyorviews><span>Views</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyorinstances-li><input type=checkbox id=m-docskonveyorinstances-check>
<label for=m-docskonveyorinstances-check><a href=/docs/konveyor/instances/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyorinstances><span>Seeding Instances</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyorinstallation-li><input type=checkbox id=m-docskonveyorinstallation-check>
<label for=m-docskonveyorinstallation-check><a href=/docs/konveyor/installation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyorinstallation><span>Installing Konveyor</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyorassessanalyze-li><input type=checkbox id=m-docskonveyorassessanalyze-check>
<label for=m-docskonveyorassessanalyze-check><a href=/docs/konveyor/assessanalyze/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyorassessanalyze><span>Assessing and analyzing applications</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskonveyoraddapps-li><input type=checkbox id=m-docskonveyoraddapps-check>
<label for=m-docskonveyoraddapps-check><a href=/docs/konveyor/addapps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docskonveyoraddapps><span>Adding applications</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsmove2kube-li><input type=checkbox id=m-docsmove2kube-check checked>
<label for=m-docsmove2kube-check><a href=/docs/move2kube/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmove2kube><span>Move2Kube</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubeconcepts-li><input type=checkbox id=m-docsmove2kubeconcepts-check>
<label for=m-docsmove2kubeconcepts-check><a href=/docs/move2kube/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubeconcepts><span>Concepts</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmove2kubeinstallation-li><input type=checkbox id=m-docsmove2kubeinstallation-check>
<label for=m-docsmove2kubeinstallation-check><a href=/docs/move2kube/installation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmove2kubeinstallation><span>Installation</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubeinstallationinstallweb-li><input type=checkbox id=m-docsmove2kubeinstallationinstallweb-check>
<label for=m-docsmove2kubeinstallationinstallweb-check><a href=/docs/move2kube/installation/installweb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubeinstallationinstallweb><span>Web Interface</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubeinstallationinstallcli-li><input type=checkbox id=m-docsmove2kubeinstallationinstallcli-check>
<label for=m-docsmove2kubeinstallationinstallcli-check><a href=/docs/move2kube/installation/installcli/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubeinstallationinstallcli><span>Command line tool</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubecommands-li><input type=checkbox id=m-docsmove2kubecommands-check>
<label for=m-docsmove2kubecommands-check><a href=/docs/move2kube/commands/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubecommands><span>Commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetransformers-li><input type=checkbox id=m-docsmove2kubetransformers-check>
<label for=m-docsmove2kubetransformers-check><a href=/docs/move2kube/transformers/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetransformers><span>Transformers</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsmove2kubetutorials-li><input type=checkbox id=m-docsmove2kubetutorials-check checked>
<label for=m-docsmove2kubetutorials-check><a href=/docs/move2kube/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmove2kubetutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsusingcli-li><input type=checkbox id=m-docsmove2kubetutorialsusingcli-check>
<label for=m-docsmove2kubetutorialsusingcli-check><a href=/docs/move2kube/tutorials/usingcli/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsusingcli><span>Using Move2Kube CLI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsusingui-li><input type=checkbox id=m-docsmove2kubetutorialsusingui-check>
<label for=m-docsmove2kubetutorialsusingui-check><a href=/docs/move2kube/tutorials/usingui/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsusingui><span>Using Move2Kube UI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmove2kubetutorialscfappstok8-li><input type=checkbox id=m-docsmove2kubetutorialscfappstok8-check>
<label for=m-docsmove2kubetutorialscfappstok8-check><a href=/docs/move2kube/tutorials/cfappstok8/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmove2kubetutorialscfappstok8><span>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscfappstok81collect-li><input type=checkbox id=m-docsmove2kubetutorialscfappstok81collect-check>
<label for=m-docsmove2kubetutorialscfappstok81collect-check><a href=/docs/move2kube/tutorials/cfappstok8/1collect/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscfappstok81collect><span>1. Collect</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscfappstok82plan-li><input type=checkbox id=m-docsmove2kubetutorialscfappstok82plan-check>
<label for=m-docsmove2kubetutorialscfappstok82plan-check><a href=/docs/move2kube/tutorials/cfappstok8/2plan/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscfappstok82plan><span>2. Plan</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscfappstok83transform-li><input type=checkbox id=m-docsmove2kubetutorialscfappstok83transform-check>
<label for=m-docsmove2kubetutorialscfappstok83transform-check><a href=/docs/move2kube/tutorials/cfappstok8/3transform/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscfappstok83transform><span>3. Transform</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsmove2kubetutorialscustomizeoutput-li><input type=checkbox id=m-docsmove2kubetutorialscustomizeoutput-check checked>
<label for=m-docsmove2kubetutorialscustomizeoutput-check><a href=/docs/move2kube/tutorials/customizeoutput/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmove2kubetutorialscustomizeoutput><span>Customizing the output</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscustomizeoutputaddcustfiledir-li><input type=checkbox id=m-docsmove2kubetutorialscustomizeoutputaddcustfiledir-check>
<label for=m-docsmove2kubetutorialscustomizeoutputaddcustfiledir-check><a href=/docs/move2kube/tutorials/customizeoutput/addcustfiledir/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscustomizeoutputaddcustfiledir><span>Add custom files and directories in custom locations</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscustomizeoutputparamcustomfieldshelm-li><input type=checkbox id=m-docsmove2kubetutorialscustomizeoutputparamcustomfieldshelm-check>
<label for=m-docsmove2kubetutorialscustomizeoutputparamcustomfieldshelm-check><a href=/docs/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscustomizeoutputparamcustomfieldshelm><span>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscustomizeoutputcustomannotationsyaml-li><input type=checkbox id=m-docsmove2kubetutorialscustomizeoutputcustomannotationsyaml-check>
<label for=m-docsmove2kubetutorialscustomizeoutputcustomannotationsyaml-check><a href=/docs/move2kube/tutorials/customizeoutput/customannotationsyaml/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscustomizeoutputcustomannotationsyaml><span>Add custom annotations to Kubernetes YAMLs</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsmove2kubetutorialscustomizeoutputcustomgendockerfile-li><input type=checkbox id=m-docsmove2kubetutorialscustomizeoutputcustomgendockerfile-check checked>
<label for=m-docsmove2kubetutorialscustomizeoutputcustomgendockerfile-check><a href=/docs/move2kube/tutorials/customizeoutput/customgendockerfile/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscustomizeoutputcustomgendockerfile><span class=td-sidebar-nav-active-item>Customize generated Dockerfile and built-in transformer behavior</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscustomkubeyaml-li><input type=checkbox id=m-docsmove2kubetutorialscustomkubeyaml-check>
<label for=m-docsmove2kubetutorialscustomkubeyaml-check><a href=/docs/move2kube/tutorials/customkubeyaml/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscustomkubeyaml><span>Customize Kubernetes YAMLs to target specific clusters</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscreatehelmchartskustomize-li><input type=checkbox id=m-docsmove2kubetutorialscreatehelmchartskustomize-check>
<label for=m-docsmove2kubetutorialscreatehelmchartskustomize-check><a href=/docs/move2kube/tutorials/createhelmchartskustomize/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscreatehelmchartskustomize><span>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialscreatewincontainersnet-li><input type=checkbox id=m-docsmove2kubetutorialscreatewincontainersnet-check>
<label for=m-docsmove2kubetutorialscreatewincontainersnet-check><a href=/docs/move2kube/tutorials/createwincontainersnet/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialscreatewincontainersnet><span>Create and deploy Windows .NET containers</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsmigratedeploynetcore-li><input type=checkbox id=m-docsmove2kubetutorialsmigratedeploynetcore-check>
<label for=m-docsmove2kubetutorialsmigratedeploynetcore-check><a href=/docs/move2kube/tutorials/migratedeploynetcore/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsmigratedeploynetcore><span>Migrate and deploy .NET Core applications to Kubernetes</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsmigratedockercomposekube-li><input type=checkbox id=m-docsmove2kubetutorialsmigratedockercomposekube-check>
<label for=m-docsmove2kubetutorialsmigratedockercomposekube-check><a href=/docs/move2kube/tutorials/migratedockercomposekube/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsmigratedockercomposekube><span>Migrate from Docker Compose to Kubernetes</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsmigratedeploycfapps-li><input type=checkbox id=m-docsmove2kubetutorialsmigratedeploycfapps-check>
<label for=m-docsmove2kubetutorialsmigratedeploycfapps-check><a href=/docs/move2kube/tutorials/migratedeploycfapps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsmigratedeploycfapps><span>Migrate and deploy Cloud Foundry applications to Kubernetes</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmove2kubetutorialsrunnoninteractively-li><input type=checkbox id=m-docsmove2kubetutorialsrunnoninteractively-check>
<label for=m-docsmove2kubetutorialsrunnoninteractively-check><a href=/docs/move2kube/tutorials/runnoninteractively/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmove2kubetutorialsrunnoninteractively><span>Run transforms non-interactively</span></a></label></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#anatomy-of-transformers-in-custom-dockerfile-change-built-in-behavior>Anatomy of transformers in custom-dockerfile-change-built-in-behavior</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tags</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=http://konveyor.io/tags/appmodernization/ data-taxonomy-term=appmodernization><span class=taxonomy-label>AppModernization</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/cncf/ data-taxonomy-term=cncf><span class=taxonomy-label>CNCF</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/crane/ data-taxonomy-term=crane><span class=taxonomy-label>Crane</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/forklift/ data-taxonomy-term=forklift><span class=taxonomy-label>Forklift</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/genai/ data-taxonomy-term=genai><span class=taxonomy-label>GenAI</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/hackfest/ data-taxonomy-term=hackfest><span class=taxonomy-label>HackFest</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/kai/ data-taxonomy-term=kai><span class=taxonomy-label>Kai</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/konveyor/ data-taxonomy-term=konveyor><span class=taxonomy-label>Konveyor</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/kubecon/ data-taxonomy-term=kubecon><span class=taxonomy-label>KubeCon</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/kubernetes/ data-taxonomy-term=kubernetes><span class=taxonomy-label>Kubernetes</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/metrics/ data-taxonomy-term=metrics><span class=taxonomy-label>Metrics</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/move2kube/ data-taxonomy-term=move2kube><span class=taxonomy-label>Move2Kube</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/mtc/ data-taxonomy-term=mtc><span class=taxonomy-label>MTC</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/openshift/ data-taxonomy-term=openshift><span class=taxonomy-label>OpenShift</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/pelorus/ data-taxonomy-term=pelorus><span class=taxonomy-label>Pelorus</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=http://konveyor.io/tags/tackle/ data-taxonomy-term=tackle><span class=taxonomy-label>Tackle</span><span class=taxonomy-count>3</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Konveyor Docs</a></li><li class=breadcrumb-item><a href=/docs/move2kube/>Move2Kube</a></li><li class=breadcrumb-item><a href=/docs/move2kube/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=/docs/move2kube/tutorials/customizeoutput/>Customizing the output</a></li><li class="breadcrumb-item active" aria-current=page>Customize generated Dockerfile and built-in transformer behavior</li></ol></nav><div class=td-content><h1>Customize generated Dockerfile and built-in transformer behavior</h1><header class=article-meta></header><p>In this tutorial, Move2Kube will add a custom Dockerfile, and a custom file.</p><ol><li>Create an empty workspace directory named <code>workspace</code> and make it the current working directory. Assume all commands are executed within this directory.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ mkdir workspace <span style=color:#f92672>&amp;&amp;</span> cd workspace
</span></span></code></pre></div><ol start=2><li>Use the <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/enterprise-app>enterprise-app</a> as input for this flow.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos
</span></span><span style=display:flex><span>$ ls src
</span></span><span style=display:flex><span>README.md		config-utils		customers	docs			frontend		gateway			orders
</span></span></code></pre></div><ol start=3><li>Run Move2Kube <strong>without</strong> any customization.</li></ol><ul><li>If the <code>Dockerfile</code> is generated for the <code>frontend</code> app, it uses <code>registry.access.redhat.com/ubi8/nodejs-12</code> as the base image.</li><li>There are no scripts named <code>start-nodejs.sh</code> in the <code>frontend</code> service directory.</li><li>The Kubernetes YAMLs are generated in <code>myproject/deploy/yamls</code> directory.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform -s src/ --qa-skip <span style=color:#f92672>&amp;&amp;</span> ls myproject/source/frontend <span style=color:#f92672>&amp;&amp;</span> cat myproject/source/frontend/Dockerfile <span style=color:#f92672>&amp;&amp;</span> ls myproject/deploy <span style=color:#f92672>&amp;&amp;</span> rm -rf myproject
</span></span><span style=display:flex><span>Dockerfile		README.md		dr-surge.js		manifest.yml		package-lock.json	server.js		stories			test-setup.js		webpack.common.js	webpack.prod.js LICENSE		__mocks__		jest.config.js		nodemon.json		package.json		src			stylePaths.js		tsconfig.json		webpack.dev.js
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>FROM registry.access.redhat.com/ubi8/nodejs-12
</span></span><span style=display:flex><span>COPY . .
</span></span><span style=display:flex><span>RUN npm install
</span></span><span style=display:flex><span>RUN npm run build
</span></span><span style=display:flex><span>EXPOSE 8080
</span></span><span style=display:flex><span>CMD npm run start
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>cicd			compose			knative			knative-parameterized	yamls			yamls-parameterized
</span></span></code></pre></div><p>The next steps will:</p><ul><li>The base image of the Dockerfile generated for Node.js from <code>registry.access.redhat.com/ubi8/nodejs-12</code> to <code>quay.io/konveyor/nodejs-12</code>.</li><li>Add a new script named <code>start-nodejs.sh</code> in the Node.js app directories along with the Dockerfile in the <code>frontend</code> directory.</li><li>Change the location of Kubernetes YAMLs from <code>myproject/deploy/yamls</code> to <code>myproject/yamls-elsewhere</code>.</li></ul><ol start=4><li>Use a <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-dockerfile-change-built-in-behavior>custom configured version</a> of the <a href=https://github.com/konveyor/move2kube/tree/main/assets/built-in/transformers/dockerfilegenerator/nodejs>Node.js built-in transformer</a> and the <a href=https://github.com/konveyor/move2kube/tree/main/assets/built-in/transformers/kubernetes/kubernetes>Kubernetes built-in transformer</a> to achieve this. Copy <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-dockerfile-change-built-in-behavior>it</a> into the <code>customizations</code> sub-directory.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d custom-dockerfile-change-built-in-behavior -r move2kube-transformers -o customizations
</span></span></code></pre></div><ol start=5><li>Transform using this customization and specify the customization using the <code>-c</code> flag.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform -s src/ -c customizations/ --qa-skip
</span></span></code></pre></div><p>Once the output is generated, note the following:</p><ul><li>The Dockerfile generated for the <code>frontend</code> app contains the custom base image.</li><li>A new file named <code>start-nodejs.sh</code> was generated in the <code>frontend</code> directory.</li><li>The Kubernetes YAMLs are now generated in <code>myproject/yamls-elsewhere</code> directory and the parameterized YAMLs are also in <code>myproject/yamls-elsewhere-parameterized</code> directory.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ ls myproject/source/frontend
</span></span><span style=display:flex><span>Dockerfile		README.md		dr-surge.js		manifest.yml		package-lock.json	server.js		start-nodejs.sh		stylePaths.js		tsconfig.json		webpack.dev.js LICENSE		__mocks__		jest.config.js		nodemon.json		package.json		src			stories			test-setup.js		webpack.common.js	webpack.prod.js
</span></span><span style=display:flex><span>$ cat myproject/source/frontend/Dockerfile
</span></span><span style=display:flex><span>FROM quay.io/konveyor/nodejs-12
</span></span><span style=display:flex><span>COPY . .
</span></span><span style=display:flex><span>RUN npm install
</span></span><span style=display:flex><span>RUN npm run build
</span></span><span style=display:flex><span>EXPOSE 8080
</span></span><span style=display:flex><span>CMD sh start-nodejs.sh
</span></span><span style=display:flex><span>$ ls myproject
</span></span><span style=display:flex><span>Readme.md			deploy				scripts				source				yamls-elsewhere			yamls-elsewhere-parameterized
</span></span></code></pre></div><h2 id=anatomy-of-transformers-in-custom-dockerfile-change-built-in-behavior>Anatomy of transformers in custom-dockerfile-change-built-in-behavior</h2><p>The two customized transformers in the directory are <code>nodejs</code> and <code>kubernetes</code>.
The contents of <code>custom-dockerfile-custom-files</code> are shown below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ tree customizations
</span></span><span style=display:flex><span>  customizations
</span></span><span style=display:flex><span>  └── custom-dockerfile-change-built-in-behavior
</span></span><span style=display:flex><span>      ├── kubernetes
</span></span><span style=display:flex><span>      │   └── kubernetes.yaml
</span></span><span style=display:flex><span>      └── nodejs
</span></span><span style=display:flex><span>          ├── nodejs.yaml
</span></span><span style=display:flex><span>          └── templates
</span></span><span style=display:flex><span>              ├── Dockerfile
</span></span><span style=display:flex><span>              └── start-nodejs.sh
</span></span></code></pre></div><p>To custom configure a built-in transformer, copy the <a href=https://github.com/konveyor/move2kube/tree/main/assets/built-in/transformers>built-in transformer&rsquo;s configuration directory</a> from the <code>move2kube</code> source, change the configurations, use it as a customization, and make it override the built-in transformer using the <code>override</code> config in the yaml.</p><p>In this case, change the Dockerfile template, add a script, and change the transformer configuration YAML.</p><ol><li>To change the template, the custom template is placed in <code>customizations/custom-dockerfile-change-built-in-behavior/nodejs/templates/Dockerfile</code>. The template is the <a href=https://github.com/konveyor/move2kube/blob/main/assets/built-in/transformers/dockerfilegenerator/nodejs/templates/Dockerfile>same as the one used in the built-in transformer</a>, except it is a custom base image and a custom <code>CMD</code>.</li></ol><pre tabindex=0><code>{% raw %}$ cat customizations/custom-dockerfile-change-built-in-behavior/nodejs/templates/Dockerfile
FROM quay.io/konveyor/nodejs-12
COPY . .
RUN npm install
{{- if .Build }}
RUN npm run build
{{- end}}
EXPOSE {{ .Port }}
CMD sh start-nodejs.sh{% endraw %}
</code></pre><ol start=2><li>Add <code>customizations/custom-dockerfile-change-built-in-behavior/nodejs/templates/start-nodejs.sh</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ ls customizations/custom-dockerfile-change-built-in-behavior/nodejs/templates/
</span></span><span style=display:flex><span>Dockerfile	start-nodejs.sh
</span></span></code></pre></div><ol start=3><li>The <code>transformer.yaml</code> is the transformer configuration with <a href=https://github.com/konveyor/move2kube/blob/main/assets/built-in/transformers/dockerfilegenerator/nodejs/transformer.yaml>two changes</a> compared to the built-in transformer:</li></ol><ul><li>The custom transformer name is <code>Nodejs-CustomFiles</code> (see <code>name</code> field in the <code>metadata</code> section).</li><li>Specify an <code>override</code> section which is asking Move2Kube to disable the transformer named <code>Nodejs-Dockerfile</code> if it is present.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ cat customizations/custom-dockerfile-change-built-in-behavior/nodejs/nodejs.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Transformer</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Nodejs-CustomFiles</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>move2kube.konveyor.io/task</span>: <span style=color:#ae81ff>containerization</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>move2kube.konveyor.io/built-in</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>class</span>: <span style=color:#e6db74>&#34;NodejsDockerfileGenerator&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>directoryDetect</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>levels</span>: -<span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>consumes</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Service</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>merge</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>produces</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Dockerfile</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>disabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>DockerfileForService</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>disabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>override</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>move2kube.konveyor.io/name</span>: <span style=color:#ae81ff>Nodejs-Dockerfile</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>defaultNodejsVersion</span>: <span style=color:#e6db74>&#34;12&#34;</span>
</span></span></code></pre></div><ol start=4><li>In the <code>kubernetes</code> transformer, change the name and override the config. Also change the default behavior of the transformer, which is to put the Kubernetes yamls in <code>deploy/yamls</code> directory by changing the <code>spec.config.outputPath</code> to <code>yamls-elsewhere</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ cat customizations/custom-dockerfile-change-built-in-behavior/kubernetes/kubernetes.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  {<span style=color:#f92672>% raw %}apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Transformer</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>KubernetesWithCustomOutputDirectory</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>move2kube.konveyor.io/built-in</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>class</span>: <span style=color:#e6db74>&#34;Kubernetes&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>directoryDetect</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>levels</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>consumes</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>IR</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>merge</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>produces</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>KubernetesYamls</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>disabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>override</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>move2kube.konveyor.io/name</span>: <span style=color:#ae81ff>Kubernetes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dependency</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>move2kube.konveyor.io/kubernetesclusterselector</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>outputPath</span>: <span style=color:#e6db74>&#34;yamls-elsewhere&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ingressName</span>: <span style=color:#e6db74>&#34;{{ .ProjectName }}&#34;</span>{<span style=color:#ae81ff>% endraw %}</span>
</span></span></code></pre></div><p>The next step is adding custom annotations to Kubernetes YAMLs.</p><p><a href=https://github.com/konveyor/konveyor.github.io/blob/main/content/Move2Kube/Tutorials/CustomizeOutput/customGenDockerFile.md>Source</a></p></div></main></div></div><footer class=footer-container><div class=footer-inner-top><p>©2025 the Konveyor authors</p><ul class=footer-links><li><a href=/privacy>Privacy Statement</a></li><li><a href=https://www.linuxfoundation.org/legal/trademark-usage target=_blank>Trademark</a></li></ul><ul class=footer-links><li><a href=https://twitter.com/Konveyor_io target=_blank><i class="fa-brands fa-x-twitter"></i></a></li><li><a href=https://www.youtube.com/channel/UCQ3pW3gSBeCy0tj1J0ub2bw target=_blank><i class="fa-brands fa-youtube"></i></a></li><li><a href="https://www.linkedin.com/company/konveyor-community/?viewAsMember=true" target=_blank><i class="fa-brands fa-linkedin"></i></a></li><li><a href=https://www.konveyor.io/slack/ target=_blank><i class="fa-brands fa-slack"></i></a></li><li><a href=https://github.com/konveyor target=_blank><i class="fa-brands fa-github"></i></a></li></ul></div><div class=footer-inner-bottom><div><div class=konveyor-logo-container><img src=/images/Konveyor-logo-color-wh.svg alt="konveyor logo"></div><p>The Konveyor community helps modernize applications by providing open source tools.</p></div><div><div class=cncf-logo-container><img src=/images/cncf-logo-white.svg alt="cncf logo"></div><p>We are a Cloud Native Computing Foundation sandbox project.</p></div></div><p class=text-center>The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href=https://www.linuxfoundation.org/legal/trademark-usage target=_blank>Trademark Usage.</a></p></footer></div><script src=/js/main.min.8bdc707530d61dee3a6fd659f8a422c05d2e2319377a8710175451ca21fa83b0.js integrity="sha256-i9xwdTDWHe46b9ZZ+KQiwF0uIxk3eocQF1RRyiH6g7A=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>