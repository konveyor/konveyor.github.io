<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.120.4"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Create and deploy Windows .NET containers - Documentation for Konveyor projects</title>
<link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Create and deploy Windows .NET containers",fileUniqID:"4f81ecb74eb5f58a59209264db0c42d7"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/move2kube/tutorials/createwincontainersnet/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/konveyor/ title=Konveyor class=dd-item><a href=/konveyor/>Konveyor</a><ul><li data-nav-id=/konveyor/contributetokonveyor/ title="Contributing To Konveyor" class=dd-item><a href=/konveyor/contributetokonveyor/>Contributing To Konveyor</a></li><li data-nav-id=/konveyor/admintasks/ title="Administrator view tasks" class=dd-item><a href=/konveyor/admintasks/>Administrator view tasks</a></li><li data-nav-id=/konveyor/views/ title=Views class=dd-item><a href=/konveyor/views/>Views</a></li><li data-nav-id=/konveyor/instances/ title="Seeding Instances" class=dd-item><a href=/konveyor/instances/>Seeding Instances</a></li><li data-nav-id=/konveyor/installation/ title="Installing Konveyor" class=dd-item><a href=/konveyor/installation/>Installing Konveyor</a></li><li data-nav-id=/konveyor/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/konveyor/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/konveyor/addapps/ title="Adding applications" class=dd-item><a href=/konveyor/addapps/>Adding applications</a></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class="dd-item
parent"><a href=/move2kube/>Move2Kube</a><ul><li data-nav-id=/move2kube/concepts/ title=Concepts class=dd-item><a href=/move2kube/concepts/>Concepts</a></li><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a><ul><li data-nav-id=/move2kube/installation/installweb/ title="Web Interface" class=dd-item><a href=/move2kube/installation/installweb/>Web Interface</a></li><li data-nav-id=/move2kube/installation/installcli/ title="Command line tool" class=dd-item><a href=/move2kube/installation/installcli/>Command line tool</a></li></ul></li><li data-nav-id=/move2kube/commands/ title=Commands class=dd-item><a href=/move2kube/commands/>Commands</a></li><li data-nav-id=/move2kube/transformers/ title=Transformers class=dd-item><a href=/move2kube/transformers/>Transformers</a></li><li data-nav-id=/move2kube/tutorials/ title=Tutorials class="dd-item
parent"><a href=/move2kube/tutorials/>Tutorials</a><ul><li data-nav-id=/move2kube/tutorials/usingcli/ title="Using Move2Kube CLI" class=dd-item><a href=/move2kube/tutorials/usingcli/>Using Move2Kube CLI</a></li><li data-nav-id=/move2kube/tutorials/usingui/ title="Using Move2Kube UI" class=dd-item><a href=/move2kube/tutorials/usingui/>Using Move2Kube UI</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/ title="Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes" class=dd-item><a href=/move2kube/tutorials/cfappstok8/>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</a><ul><li data-nav-id=/move2kube/tutorials/cfappstok8/1collect/ title="1. Collect" class=dd-item><a href=/move2kube/tutorials/cfappstok8/1collect/>1. Collect</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/2plan/ title="2. Plan" class=dd-item><a href=/move2kube/tutorials/cfappstok8/2plan/>2. Plan</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/3transform/ title="3. Transform" class=dd-item><a href=/move2kube/tutorials/cfappstok8/3transform/>3. Transform</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customizeoutput/ title="Customizing the output" class=dd-item><a href=/move2kube/tutorials/customizeoutput/>Customizing the output</a><ul><li data-nav-id=/move2kube/tutorials/customizeoutput/addcustfiledir/ title="Add custom files and directories in custom locations" class=dd-item><a href=/move2kube/tutorials/customizeoutput/addcustfiledir/>Add custom files and directories in custom locations</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ title="Parameterizing custom fields in Helm Chart, Kustomize, OC templates" class=dd-item><a href=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customannotationsyaml/ title="Add custom annotations to Kubernetes YAMLs" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customannotationsyaml/>Add custom annotations to Kubernetes YAMLs</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customgendockerfile/ title="Customize generated Dockerfile and built-in transformer behavior" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customgendockerfile/>Customize generated Dockerfile and built-in transformer behavior</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customkubeyaml/ title="Customize Kubernetes YAMLs to target specific clusters" class=dd-item><a href=/move2kube/tutorials/customkubeyaml/>Customize Kubernetes YAMLs to target specific clusters</a></li><li data-nav-id=/move2kube/tutorials/createhelmchartskustomize/ title="Create Helm-charts, Kustomize overlays from Kubernetes Yamls" class=dd-item><a href=/move2kube/tutorials/createhelmchartskustomize/>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</a></li><li data-nav-id=/move2kube/tutorials/createwincontainersnet/ title="Create and deploy Windows .NET containers" class="dd-item active"><a href=/move2kube/tutorials/createwincontainersnet/>Create and deploy Windows .NET containers</a></li><li data-nav-id=/move2kube/tutorials/migratedeploynetcore/ title="Migrate and deploy .NET Core applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploynetcore/>Migrate and deploy .NET Core applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedockercomposekube/ title="Migrate from Docker Compose to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedockercomposekube/>Migrate from Docker Compose to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedeploycfapps/ title="Migrate and deploy Cloud Foundry applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploycfapps/>Migrate and deploy Cloud Foundry applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/runnoninteractively/ title="Run transforms non-interactively" class=dd-item><a href=/move2kube/tutorials/runnoninteractively/>Run transforms non-interactively</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Create and deploy Windows .NET containers</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#net-applications-in-4x-framework>.NET applications in 4.x framework</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#generating-target-artifacts>Generating target artifacts</a></li><li><a href=#differences-in-windows-applications>Differences in Windows applications</a></li><li><a href=#deploying-the-application-to-kubernetes-with-the-generated-target-artifacts>Deploying the application to Kubernetes with the generated target artifacts</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Create and deploy Windows .NET containers</h1><h2 id=net-applications-in-4x-framework>.NET applications in 4.x framework</h2><p>This tutorial shows how containerize .NET applications developed for 4.x versions of .NET framework using Windows containers and deploy them to Kubernetes cluster using Move2Kube. This tutorial uses the sample <a href=https://docs.microsoft.com/en-us/dotnet/framework/wcf/whats-wcf>WCF</a> service from <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/wcfservice>samples/wcfservice</a>.</p><h2 id=prerequisites>Prerequisites</h2><ol><li><p>Install Move2Kube.</p></li><li><p>Configure Kubernetes with <a href=https://kubernetes.io/docs/setup/production-environment/windows/user-guide-windows-containers/>windows node support</a>.</p></li><li><p>Download the <code>samples/wcfservice</code> sample from <a href=https://github.com/konveyor/move2kube-demos>move2kube-demos</a> repository.</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/wcfservice -r move2kube-demos
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>   $ tree -L 2 wcfservice/
</span></span><span style=display:flex><span>    wcfservice/
</span></span><span style=display:flex><span>    ├── wcfservice
</span></span><span style=display:flex><span>    │   ├── App.config
</span></span><span style=display:flex><span>    │   ├── IWindowsSampleService.cs
</span></span><span style=display:flex><span>    │   ├── Properties
</span></span><span style=display:flex><span>    │   ├── WindowsSampleService.cs
</span></span><span style=display:flex><span>    │   ├── wcfservice.cs
</span></span><span style=display:flex><span>    │   └── wcfservice.csproj
</span></span><span style=display:flex><span>    └── wcfservice.sln
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    2 directories, 6 files
</span></span></code></pre></div><h2 id=generating-target-artifacts>Generating target artifacts</h2><p>This procedure uses a two stage process for the transformation: plan and <em>transform</em>. Run these steps from the directory containing the <code>./wcfservice/</code> directory:</p><ol><li>First create a plan of how to transform the applications to run on Kubernetes. In this phase, Move2Kube goes through the source artifacts to develop a plan.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube plan -s wcfservice
</span></span><span style=display:flex><span>INFO[0000] Configuration loading done   
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Base Directory 
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Planning transformation   
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Done  
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Done
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Done   
</span></span><span style=display:flex><span>INFO[0000] [Base Directory] Identified 0 named services and 0 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Base Directory done
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Directory Walk 
</span></span><span style=display:flex><span>INFO[0000] Identified 1 named services and 0 to-be-named services in .
</span></span><span style=display:flex><span>WARN[0000] Unable to find compatible ASP.NET Core target framework  hence skipping.
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Directory Walk done
</span></span><span style=display:flex><span>INFO[0000] [Directory Walk] Identified 1 named services and 0 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] [Named Services] Identified 1 named services
</span></span><span style=display:flex><span>INFO[0000] No of services identified : 1
</span></span><span style=display:flex><span>INFO[0000] Plan can be found at [/Users/padmanabha/go/src/github.com/seshapad/workdir/dotnet-legacy-test/m2k.plan].
</span></span></code></pre></div><p>Move2Kube has created a <em>m2k.plan</em> which is essentially a YAML file. Details of the plan file are shown below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>        <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Plan</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myproject</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>sourceDir</span>: <span style=color:#ae81ff>wcfservice</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>wcfservice</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>transformerName</span>: <span style=color:#ae81ff>WinConsoleApp-Dockerfile</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>AppConfigFilePathList</span>:
</span></span></code></pre></div><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the rest of the yaml.</span></div><div class=expand-content style=display:none><pre tabindex=0><code>                    - wcfservice/App.config
                ServiceDirPath:
                    - .
        transformers:
            Buildconfig: m2kassets/built-in/transformers/kubernetes/buildconfig/transformer.yaml
            CloudFoundry: m2kassets/built-in/transformers/cloudfoundry/transformer.yaml
            ClusterSelector: m2kassets/built-in/transformers/kubernetes/clusterselector/transformer.yaml
            ComposeAnalyser: m2kassets/built-in/transformers/compose/composeanalyser/transformer.yaml
            ComposeGenerator: m2kassets/built-in/transformers/compose/composegenerator/transformer.yaml
            ContainerImagesPushScriptGenerator: m2kassets/built-in/transformers/containerimagespushscript/transformer.yaml
            DockerfileDetector: m2kassets/built-in/transformers/dockerfile/dockerfiledetector/transformer.yaml
            DockerfileImageBuildScript: m2kassets/built-in/transformers/dockerfile/dockerimagebuildscript/transformer.yaml
            DockerfileParser: m2kassets/built-in/transformers/dockerfile/dockerfileparser/transformer.yaml
            DotNetCore-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/dotnetcore/transformer.yaml
            EarAnalyser: m2kassets/built-in/transformers/dockerfilegenerator/java/earanalyser/transformer.yaml
            EarRouter: m2kassets/built-in/transformers/dockerfilegenerator/java/earrouter/transformer.yaml
            Golang-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/golang/transformer.yaml
            Gradle: m2kassets/built-in/transformers/dockerfilegenerator/java/gradle/transformer.yaml
            Jar: m2kassets/built-in/transformers/dockerfilegenerator/java/jar/transformer.yaml
            Jboss: m2kassets/built-in/transformers/dockerfilegenerator/java/jboss/transformer.yaml
            Knative: m2kassets/built-in/transformers/kubernetes/knative/transformer.yaml
            Kubernetes: m2kassets/built-in/transformers/kubernetes/kubernetes/transformer.yaml
            KubernetesVersionChanger: m2kassets/built-in/transformers/kubernetes/kubernetesversionchanger/transformer.yaml
            Liberty: m2kassets/built-in/transformers/dockerfilegenerator/java/liberty/transformer.yaml
            Maven: m2kassets/built-in/transformers/dockerfilegenerator/java/maven/transformer.yaml
            Nodejs-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/nodejs/transformer.yaml
            PHP-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/php/transformer.yaml
            Parameterizer: m2kassets/built-in/transformers/kubernetes/parameterizer/transformer.yaml
            Python-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/python/transformer.yaml
            ReadMeGenerator: m2kassets/built-in/transformers/readmegenerator/transformer.yaml
            Ruby-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/ruby/transformer.yaml
            Rust-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/rust/transformer.yaml
            Tekton: m2kassets/built-in/transformers/kubernetes/tekton/transformer.yaml
            Tomcat: m2kassets/built-in/transformers/dockerfilegenerator/java/tomcat/transformer.yaml
            WarAnalyser: m2kassets/built-in/transformers/dockerfilegenerator/java/waranalyser/transformer.yaml
            WarRouter: m2kassets/built-in/transformers/dockerfilegenerator/java/warrouter/transformer.yaml
            WinConsoleApp-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/windows/winconsole/transformer.yaml
            WinSLWebApp-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/windows/winsilverlightweb/transformer.yaml
            WinWebApp-Dockerfile: m2kassets/built-in/transformers/dockerfilegenerator/windows/winweb/transformer.yaml
            ZuulAnalyser: m2kassets/built-in/transformers/dockerfilegenerator/java/zuul/transformer.yaml
</code></pre></div></div><ul><li>In the plan, notice that Move2Kube has detected the WCF services (<code>wcfservice</code>) and the relative path of the detected <code>/App.config</code>.</li><li>The plan file indicates that the applications can be transformed using Move2Kube&rsquo;s built-in <code>WinConsoleApp-Dockerfile</code> transformer.</li></ul><ol start=2><li>Invoke <code>move2kube transform</code> on this plan.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform
</span></span><span style=display:flex><span>INFO[0000] Detected a plan file at path /Users/padmanabha/go/src/github.com/seshapad/workdir/dotnet-legacy-test/m2k.plan. Will transform using this plan.
</span></span><span style=display:flex><span>? Select all transformer types that you are interested in:
</span></span><span style=display:flex><span>ID: move2kube.transformers.types
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Services that don&#39;t support any of the transformer types you are interested in will be ignored.]
</span></span><span style=display:flex><span>[Use arrows to move, space to select, &lt;right&gt; to all, &lt;left&gt; to none, type to filter]
</span></span><span style=display:flex><span>[✓]  PHP-Dockerfile
</span></span><span style=display:flex><span>[✓]  Gradle
</span></span><span style=display:flex><span>[✓]  Kubernetes
</span></span><span style=display:flex><span>[✓]  Knative
</span></span><span style=display:flex><span>[✓]  Nodejs-Dockerfile
</span></span><span style=display:flex><span>[✓]  Tekton
</span></span><span style=display:flex><span>[✓]  ZuulAnalyser
</span></span><span style=display:flex><span>[✓]  ComposeAnalyser
</span></span><span style=display:flex><span>[✓]  Jar
</span></span><span style=display:flex><span>[✓]  Liberty
</span></span><span style=display:flex><span>[✓]  Python-Dockerfile
</span></span><span style=display:flex><span>[✓]  ContainerImagesPushScriptGenerator
</span></span><span style=display:flex><span>[✓]  Jboss
</span></span><span style=display:flex><span>[✓]  Parameterizer
</span></span><span style=display:flex><span>[✓]  WinSLWebApp-Dockerfile
</span></span><span style=display:flex><span>[✓]  Buildconfig
</span></span><span style=display:flex><span>[✓]  CloudFoundry
</span></span><span style=display:flex><span>[✓]  Ruby-Dockerfile
</span></span><span style=display:flex><span>[✓]  WinWebApp-Dockerfile
</span></span><span style=display:flex><span>[✓]  DockerfileDetector
</span></span><span style=display:flex><span>[✓]  Golang-Dockerfile
</span></span><span style=display:flex><span>[✓]  WinConsoleApp-Dockerfile
</span></span><span style=display:flex><span>[✓]  EarAnalyser
</span></span><span style=display:flex><span>[✓]  KubernetesVersionChanger
</span></span><span style=display:flex><span>[✓]  Maven
</span></span><span style=display:flex><span>[✓]  ClusterSelector
</span></span><span style=display:flex><span>[✓]  EarRouter
</span></span><span style=display:flex><span>[✓]  DockerfileParser
</span></span><span style=display:flex><span>[✓]  DotNetCore-Dockerfile
</span></span><span style=display:flex><span>[✓]  ReadMeGenerator
</span></span><span style=display:flex><span>[✓]  Rust-Dockerfile
</span></span><span style=display:flex><span>[✓]  Tomcat
</span></span><span style=display:flex><span>[✓]  WarAnalyser
</span></span><span style=display:flex><span>[✓]  ComposeGenerator
</span></span><span style=display:flex><span>[✓]  DockerfileImageBuildScript
</span></span><span style=display:flex><span>[✓]  WarRouter
</span></span></code></pre></div><ol start=3><li>Accept the default by pressing <strong>Enter</strong> key.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Services that don&#39;t support any of the transformer types you are interested in will be ignored.]
</span></span><span style=display:flex><span>PHP-Dockerfile, Gradle, Kubernetes, Knative, Nodejs-Dockerfile, Tekton, ZuulAnalyser, ComposeAnalyser, Jar, Liberty, Python-Dockerfile, ContainerImagesPushScriptGenerator, Jboss, Parameterizer, WinSLWebApp-Dockerfile, Buildconfig, CloudFoundry, Ruby-Dockerfile, WinWebApp-Dockerfile, DockerfileDetector, Golang-Dockerfile, WinConsoleApp-Dockerfile, EarAnalyser, KubernetesVersionChanger, Maven, ClusterSelector, EarRouter, DockerfileParser, DotNetCore-Dockerfile, ReadMeGenerator, Rust-Dockerfile, Tomcat, WarAnalyser, ComposeGenerator, DockerfileImageBuildScript, WarRouter
</span></span><span style=display:flex><span>? Select all services that are needed:
</span></span><span style=display:flex><span>ID: move2kube.services.[].enable
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The services unselected here will be ignored.]
</span></span><span style=display:flex><span>  [Use arrows to move, space to select, &lt;right&gt; to all, &lt;left&gt; to none, type to filter]
</span></span><span style=display:flex><span>  [✓]  wcfservice
</span></span></code></pre></div><ol start=4><li>Select all the services.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>? Select all services that are needed:
</span></span><span style=display:flex><span>ID: move2kube.services.[].enable
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The services unselected here will be ignored.]
</span></span><span style=display:flex><span>wcfservice
</span></span><span style=display:flex><span>INFO[0233] Starting Plan Transformation 
</span></span><span style=display:flex><span>INFO[0233] Iteration 1  
</span></span><span style=display:flex><span>INFO[0233] Iteration 2 - 1 artifacts to process 
</span></span><span style=display:flex><span>INFO[0233] Transformer WinConsoleApp-Dockerfile processing 1 artifacts
</span></span><span style=display:flex><span>INFO[0233] Transformer WinConsoleApp-Dockerfile Done
</span></span><span style=display:flex><span>INFO[0233] Created 2 pathMappings and 2 artifacts. Total Path Mappings : 2. Total Artifacts : 1.
</span></span><span style=display:flex><span>INFO[0233] Iteration 3 - 2 artifacts to process 
</span></span><span style=display:flex><span>INFO[0233] Transformer DockerfileParser processing 1 artifacts
</span></span><span style=display:flex><span>WARN[0233] Unable to find ports in Dockerfile : /var/folders/45/5wf_qgcs06gd_xpg6rzvbx0r0000gn/T/move2kube2980808479/environment-DockerfileParser-1624209065/2318519572/source/Dockerfile. Using default port
</span></span><span style=display:flex><span>INFO[0233] Transformer ZuulAnalyser processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0233] Transformer ZuulAnalyser Done
</span></span><span style=display:flex><span>INFO[0233] Transformer DockerfileParser Done
</span></span><span style=display:flex><span>INFO[0233] Transformer DockerfileImageBuildScript processing 2 artifacts
</span></span><span style=display:flex><span>? Select the container runtime to use :
</span></span><span style=display:flex><span>ID: move2kube.containerruntime
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The container runtime selected will be used in the scripts]
</span></span><span style=display:flex><span>  [Use arrows to move, type to filter]
</span></span><span style=display:flex><span>&gt; docker
</span></span><span style=display:flex><span>  podman
</span></span></code></pre></div><ol start=5><li>Select runtime of choice. In this case, select <code>docker</code>.</li></ol><blockquote><p><strong>Note:</strong> At this point, the default port <code>8080</code> is detected and the user is prompted whether to expose this port.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>INFO[0346] Transformer DockerfileImageBuildScript Done  
</span></span><span style=display:flex><span>INFO[0346] Created 1 pathMappings and 4 artifacts. Total Path Mappings : 3. Total Artifacts : 3.
</span></span><span style=display:flex><span>INFO[0346] Iteration 4 - 4 artifacts to process 
</span></span><span style=display:flex><span>INFO[0346] Transformer ComposeGenerator processing 2 artifacts
</span></span><span style=display:flex><span>? What URL/path should we expose the service wcfservice&#39;s 8080 port on?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;wcfservice&#34;.&#34;8080&#34;.urlpath
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Enter :- not expose the service, Leave out leading / to use first part as subdomain, Add :N as suffix for NodePort service type, Add :L for Load Balancer service type]
</span></span><span style=display:flex><span>(/wcfservice) wcfservice
</span></span></code></pre></div><ol start=6><li>Leave out the leading <code>/</code> to use the first part <code>wcfservice</code> as subdomain (as specified in the <em>Hints</em>).</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>wcfservice
</span></span><span style=display:flex><span>? Provide the minimum number of replicas each service should have
</span></span><span style=display:flex><span>ID: move2kube.minreplicas
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[If the value is 0 pods won&#39;t be started by default]
</span></span><span style=display:flex><span>(2)
</span></span></code></pre></div><ol start=7><li>Accept the default answer for two replicas for the given service.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2
</span></span><span style=display:flex><span>? Enter the URL of the image registry :
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[You can always change it later by changing the yamls.]
</span></span><span style=display:flex><span>  [Use arrows to move, type to filter]
</span></span><span style=display:flex><span>  Other (specify custom option)
</span></span><span style=display:flex><span>  index.docker.io
</span></span><span style=display:flex><span>&gt; quay.io
</span></span><span style=display:flex><span>  us.icr.io
</span></span></code></pre></div><ol start=8><li>Enter <code>quay.io</code> for the image registry host. Select &lsquo;Other&rsquo; if the registry name is not here.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>quay.io
</span></span><span style=display:flex><span>? Enter the namespace where the new images should be pushed :  
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span> [Ex : myproject]
</span></span><span style=display:flex><span> (myproject) m2k-tutorial
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span> No authentication
</span></span><span style=display:flex><span>INFO[0793] Transformer ComposeGenerator Done
</span></span><span style=display:flex><span>INFO[0793] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>? Choose the cluster type:
</span></span><span style=display:flex><span>ID: move2kube.target.clustertype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose the cluster type you would like to target]
</span></span><span style=display:flex><span>    [Use arrows to move, type to filter]
</span></span><span style=display:flex><span>    Openshift
</span></span><span style=display:flex><span>    AWS-EKS
</span></span><span style=display:flex><span>    Azure-AKS
</span></span><span style=display:flex><span>    GCP-GKE
</span></span><span style=display:flex><span>    IBM-IKS
</span></span><span style=display:flex><span>    IBM-Openshift
</span></span><span style=display:flex><span>    &gt; Kubernetes
</span></span></code></pre></div><ol start=9><li>Select the <code>Kubernetes</code> cluster type to deploy to.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  Kubernetes
</span></span><span style=display:flex><span>INFO[0863] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0863] Transformer Knative processing 2 artifacts   
</span></span><span style=display:flex><span>INFO[0863] Transformer Knative Done 
</span></span><span style=display:flex><span>INFO[0863] Transformer ContainerImagesPushScriptGenerator processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0863] Transformer ContainerImagesPushScriptGenerator Done
</span></span><span style=display:flex><span>INFO[0863] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0863] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0863] Transformer Buildconfig processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0863] Transformer Buildconfig Done 
</span></span><span style=display:flex><span>INFO[0863] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0863] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0863] Transformer Kubernetes processing 2 artifacts
</span></span><span style=display:flex><span>? Provide the ingress host domain
</span></span><span style=display:flex><span>ID: move2kube.target.ingress.host
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Ingress host domain is part of service URL]
</span></span><span style=display:flex><span>    my-cluster-ingress-host-domain.com
</span></span></code></pre></div><ol start=10><li>Indicate the ingress hosting domain which can be copied from the cluster you are deploying to. The ingress hosting domain will differ based on the cluster being fetched from.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span> my-cluster-ingress-host-domain.com
</span></span><span style=display:flex><span>? Provide the TLS secret for ingress
</span></span><span style=display:flex><span>ID: move2kube.target.ingress.tls
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Leave empty to use http]
</span></span></code></pre></div><ol start=11><li>Accept the by-default for the TLS secret by pressing the <strong>Enter</strong> key.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>INFO[0934] Transformer Kubernetes Done  
</span></span><span style=display:flex><span>INFO[0934] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0934] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0934] Transformer Tekton processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0934] Transformer Tekton Done  
</span></span><span style=display:flex><span>INFO[0934] Created 27 pathMappings and 7 artifacts. Total Path Mappings : 30. Total Artifacts : 7.
</span></span><span style=display:flex><span>INFO[0934] Iteration 5 - 7 artifacts to process 
</span></span><span style=display:flex><span>INFO[0934] Transformer Parameterizer processing 4 artifacts
</span></span><span style=display:flex><span>INFO[0934] Transformer Parameterizer Done   
</span></span><span style=display:flex><span>INFO[0934] Transformer ReadMeGenerator processing 5 artifacts
</span></span><span style=display:flex><span>INFO[0934] Transformer ReadMeGenerator Done 
</span></span><span style=display:flex><span>INFO[0935] Plan Transformation done 
</span></span><span style=display:flex><span>INFO[0935] Transformed target artifacts can be found at [/Users/padmanabha/go/src/github.com/seshapad/workdir/dotnet-legacy-test/myproject].
</span></span></code></pre></div><p>The transformation is successful and the target artifacts can be found inside the <code>./myproject</code> directory. The overview of the structure of the <em>./myproject</em> directory can be seen by executing the below command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$  tree -L <span style=color:#ae81ff>3</span> myproject
</span></span><span style=display:flex><span>myproject/
</span></span><span style=display:flex><span>├── Readme.md
</span></span><span style=display:flex><span>├── deploy
</span></span><span style=display:flex><span>│   ├── cicd
</span></span><span style=display:flex><span>│   │   ├── tekton
</span></span><span style=display:flex><span>│   │   └── tekton-parameterized
</span></span><span style=display:flex><span>│   ├── compose
</span></span><span style=display:flex><span>│   │   └── docker-compose.yaml
</span></span><span style=display:flex><span>│   ├── knative
</span></span><span style=display:flex><span>│   │   └── wcfservice-service.yaml
</span></span><span style=display:flex><span>│   ├── knative-parameterized
</span></span><span style=display:flex><span>│   │   ├── helm-chart
</span></span><span style=display:flex><span>│   │   ├── kustomize
</span></span><span style=display:flex><span>│   │   └── openshift-template
</span></span><span style=display:flex><span>│   ├── yamls
</span></span><span style=display:flex><span>│   │   ├── myproject-ingress.yaml
</span></span><span style=display:flex><span>│   │   ├── wcfservice-deployment.yaml
</span></span><span style=display:flex><span>│   │   └── wcfservice-service.yaml
</span></span><span style=display:flex><span>│   └── yamls-parameterized
</span></span><span style=display:flex><span>│       ├── helm-chart
</span></span><span style=display:flex><span>│       ├── kustomize
</span></span><span style=display:flex><span>│       └── openshift-template
</span></span><span style=display:flex><span>├── scripts
</span></span><span style=display:flex><span>│   ├── builddockerimages.bat
</span></span><span style=display:flex><span>│   ├── builddockerimages.sh
</span></span><span style=display:flex><span>│   ├── pushimages.bat
</span></span><span style=display:flex><span>│   └── pushimages.sh
</span></span><span style=display:flex><span>└── source
</span></span><span style=display:flex><span>    ├── Dockerfile
</span></span><span style=display:flex><span>    ├── wcfservice
</span></span><span style=display:flex><span>    │   ├── App.config
</span></span><span style=display:flex><span>    │   ├── IWindowsSampleService.cs
</span></span><span style=display:flex><span>    │   ├── Properties
</span></span><span style=display:flex><span>    │   ├── WindowsSampleService.cs
</span></span><span style=display:flex><span>    │   ├── wcfservice.cs
</span></span><span style=display:flex><span>    │   └── wcfservice.csproj
</span></span><span style=display:flex><span>    └── wcfservice.sln
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>19 directories, 17 files
</span></span></code></pre></div><p>Move2Kube has created all the deployment artifacts which are present inside the <code>./myproject</code> directory. The <code>./myproject/source</code> directory looks very similar to the <code>wcfservice</code> directory given as input to Move2Kube. But, Move2Kube has placed additional files in the source code. For example, it has added the <code>Dockerfile</code> for each of the transformed services, and with these Dockerfiles, the applications can be containerized and then deployed to a Kubernetes cluster.</p><h2 id=differences-in-windows-applications>Differences in Windows applications</h2><p>There are two main differences in Move2Kube Windows application transformations.</p><p>The first difference is in the deployment YAML of the Windows container images (see <code>myproject/deploy/yamls/wcfservice-deployment.yaml</code> in the above example) . The <code>nodeSelector</code> and <code>tolerations</code> ensure that the image is instantiated on a Windows node in the Kubernetes cluster.</p><pre tabindex=0><code>nodeSelector:
kubernetes.io/os: windows
restartPolicy: Always
schedulerName: default-scheduler
securityContext: {}
terminationGracePeriodSeconds: 30
tolerations:
- effect: NoSchedule
key: os
value: Windows
</code></pre><p>The second difference is in the Dockerfile (see <code>myproject/source/Dockerfile</code> in the above example) for the Windows service as shown below. The <code>FROM</code> instruction refers to Windows container images and the <code>--platform</code> indicates that these images have to be built for a Windows platform.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>FROM --platform=windows/amd64 mcr.microsoft.com/dotnet/framework/sdk:4.8 As builder</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>WORKDIR /app</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>COPY . .</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>RUN msbuild /p:Configuration=Release /p:OutputPath=/app/output</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>FROM --platform=windows/amd64 mcr.microsoft.com/dotnet/framework/runtime:4.8</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>WORKDIR /app</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>COPY --from=builder /app/output/ .</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>CMD wcfservice.exe</span>
</span></span></code></pre></div><h2 id=deploying-the-application-to-kubernetes-with-the-generated-target-artifacts>Deploying the application to Kubernetes with the generated target artifacts</h2><p>The steps involved to deploy a Windows application is the same as any other application except the container images have to be built on a Windows machine with Docker Desktop set to <a href=https://docs.docker.com/desktop/windows/#switch-between-windows-and-linux-containers>Windows container mode</a>. Refer to .NET core deployment section for details.</p><h2 id=conclusion>Conclusion</h2><p>This tutorial shows how to migrate multiple .NET applications developed on 4.x .NET framework to Kubernetes using the target artifacts generated by Move2Kube.</p><p><a href=https://github.com/konveyor/konveyor.github.io/blob/main/content/Move2Kube/Tutorials/createWINcontainersNET.md>Source</a></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/perfect-scrollbar.min.js></script><script src=/js/perfect-scrollbar.jquery.min.js></script><script src=/js/jquery.sticky.js></script><script src=/js/featherlight.min.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script><script src=/js/learn.js></script><script src=/js/hugo-learn.js></script><script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>