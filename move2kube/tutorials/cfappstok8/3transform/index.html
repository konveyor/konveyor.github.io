<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.109.0"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>3. Transform - Documentation for Konveyor projects</title><link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"3. Transform",fileUniqID:"1438aaa99ddcf562a763cabd2503440d"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/move2kube/tutorials/cfappstok8/3transform/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script>
<script type=text/javascript src=/js/auto-complete.js></script>
<script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/crane/ title=Crane class=dd-item><a href=/crane/><b>1 </b>Crane</a><ul><li data-nav-id=/crane/tutorials/ title=Tutorials class=dd-item><a href=/crane/tutorials/>Tutorials</a><ul><li data-nav-id=/crane/tutorials/statelessappmirror/ title="Stateless application mirror" class=dd-item><a href=/crane/tutorials/statelessappmirror/>Stateless application mirror</a></li><li data-nav-id=/crane/tutorials/migratek8cluster/ title="Migrating a Kubernetes cluster" class=dd-item><a href=/crane/tutorials/migratek8cluster/>Migrating a Kubernetes cluster</a></li></ul></li><li data-nav-id=/crane/tools/ title=Tools class=dd-item><a href=/crane/tools/>Tools</a><ul><li data-nav-id=/crane/tools/gitopsintegration/ title="Integrating GitOps" class=dd-item><a href=/crane/tools/gitopsintegration/>Integrating GitOps</a></li><li data-nav-id=/crane/tools/customplugins/ title="Developing custom plugins" class=dd-item><a href=/crane/tools/customplugins/>Developing custom plugins</a></li><li data-nav-id=/crane/tools/tunnelapi/ title="Tunnel API" class=dd-item><a href=/crane/tools/tunnelapi/>Tunnel API</a></li><li data-nav-id=/crane/tools/pluginmanager/ title="Plugin Manager" class=dd-item><a href=/crane/tools/pluginmanager/>Plugin Manager</a></li></ul></li><li data-nav-id=/crane/usingcrane/ title="Using Crane" class=dd-item><a href=/crane/usingcrane/>Using Crane</a><ul><li data-nav-id=/crane/usingcrane/step1export/ title="Step One: Export Resources" class=dd-item><a href=/crane/usingcrane/step1export/>Step One: Export Resources</a></li><li data-nav-id=/crane/usingcrane/step2transform/ title="Step Two: Transform Exports" class=dd-item><a href=/crane/usingcrane/step2transform/>Step Two: Transform Exports</a></li><li data-nav-id=/crane/usingcrane/step3apply/ title="Step Three: Apply Patches" class=dd-item><a href=/crane/usingcrane/step3apply/>Step Three: Apply Patches</a></li></ul></li><li data-nav-id=/crane/installation/ title="Installing Crane" class=dd-item><a href=/crane/installation/>Installing Crane</a></li></ul></li><li data-nav-id=/forklift/ title=Forklift class=dd-item><a href=/forklift/><b>2 </b>Forklift</a><ul><li data-nav-id=/forklift/migratingvms/ title="Migrating virtual machines" class=dd-item><a href=/forklift/migratingvms/>Migrating virtual machines</a><ul><li data-nav-id=/forklift/migratingvms/migrateoptions/ title="Migration plan options" class=dd-item><a href=/forklift/migratingvms/migrateoptions/>Migration plan options</a></li><li data-nav-id=/forklift/migratingvms/migratecli/ title="Migrating virtual machines using the command line" class=dd-item><a href=/forklift/migratingvms/migratecli/>Migrating virtual machines using the command line</a></li><li data-nav-id=/forklift/migratingvms/migrateweb/ title="Migrating virtual machines using the web console" class=dd-item><a href=/forklift/migratingvms/migrateweb/>Migrating virtual machines using the web console</a></li><li data-nav-id=/forklift/migratingvms/cancelmigrate/ title="Canceling a migration" class=dd-item><a href=/forklift/migratingvms/cancelmigrate/>Canceling a migration</a></li><li data-nav-id=/forklift/migratingvms/advancedmigrate/ title="Advanced migration options" class=dd-item><a href=/forklift/migratingvms/advancedmigrate/>Advanced migration options</a></li></ul></li><li data-nav-id=/forklift/installingforklift/ title="Installing Forklift" class=dd-item><a href=/forklift/installingforklift/>Installing Forklift</a><ul><li data-nav-id=/forklift/installingforklift/upgrade/ title="Upgrading Forklift" class=dd-item><a href=/forklift/installingforklift/upgrade/>Upgrading Forklift</a></li><li data-nav-id=/forklift/installingforklift/uninstall/ title="Uninstalling Forklift" class=dd-item><a href=/forklift/installingforklift/uninstall/>Uninstalling Forklift</a></li><li data-nav-id=/forklift/installingforklift/installation/ title="Installing the Forklift Operator" class=dd-item><a href=/forklift/installingforklift/installation/>Installing the Forklift Operator</a></li><li data-nav-id=/forklift/installingforklift/prereqs/ title=Prerequisites class=dd-item><a href=/forklift/installingforklift/prereqs/>Prerequisites</a></li></ul></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class="dd-item
parent"><a href=/move2kube/><b>3 </b>Move2Kube</a><ul><li data-nav-id=/move2kube/concepts/ title=Concepts class=dd-item><a href=/move2kube/concepts/>Concepts</a></li><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a><ul><li data-nav-id=/move2kube/installation/installweb/ title="Web Interface" class=dd-item><a href=/move2kube/installation/installweb/>Web Interface</a></li><li data-nav-id=/move2kube/installation/installcli/ title="Command line tool" class=dd-item><a href=/move2kube/installation/installcli/>Command line tool</a></li></ul></li><li data-nav-id=/move2kube/commands/ title=Commands class=dd-item><a href=/move2kube/commands/>Commands</a></li><li data-nav-id=/move2kube/transformers/ title=Transformers class=dd-item><a href=/move2kube/transformers/>Transformers</a></li><li data-nav-id=/move2kube/tutorials/ title=Tutorials class="dd-item
parent"><a href=/move2kube/tutorials/>Tutorials</a><ul><li data-nav-id=/move2kube/tutorials/usingcli/ title="Using Move2Kube CLI" class=dd-item><a href=/move2kube/tutorials/usingcli/>Using Move2Kube CLI</a></li><li data-nav-id=/move2kube/tutorials/usingui/ title="Using Move2Kube UI" class=dd-item><a href=/move2kube/tutorials/usingui/>Using Move2Kube UI</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/ title="Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes" class="dd-item
parent"><a href=/move2kube/tutorials/cfappstok8/>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</a><ul><li data-nav-id=/move2kube/tutorials/cfappstok8/1collect/ title="1. Collect" class=dd-item><a href=/move2kube/tutorials/cfappstok8/1collect/>1. Collect</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/2plan/ title="2. Plan" class=dd-item><a href=/move2kube/tutorials/cfappstok8/2plan/>2. Plan</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/3transform/ title="3. Transform" class="dd-item active"><a href=/move2kube/tutorials/cfappstok8/3transform/>3. Transform</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customizeoutput/ title="Customizing the output" class=dd-item><a href=/move2kube/tutorials/customizeoutput/>Customizing the output</a><ul><li data-nav-id=/move2kube/tutorials/customizeoutput/addcustfiledir/ title="Add custom files and directories in custom locations" class=dd-item><a href=/move2kube/tutorials/customizeoutput/addcustfiledir/>Add custom files and directories in custom locations</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ title="Parameterizing custom fields in Helm Chart, Kustomize, OC templates" class=dd-item><a href=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customannotationsyaml/ title="Add custom annotations to Kubernetes YAMLs" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customannotationsyaml/>Add custom annotations to Kubernetes YAMLs</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customgendockerfile/ title="Customize generated Dockerfile and built-in transformer behavior" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customgendockerfile/>Customize generated Dockerfile and built-in transformer behavior</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customkubeyaml/ title="Customize Kubernetes YAMLs to target specific clusters" class=dd-item><a href=/move2kube/tutorials/customkubeyaml/>Customize Kubernetes YAMLs to target specific clusters</a></li><li data-nav-id=/move2kube/tutorials/createhelmchartskustomize/ title="Create Helm-charts, Kustomize overlays from Kubernetes Yamls" class=dd-item><a href=/move2kube/tutorials/createhelmchartskustomize/>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</a></li><li data-nav-id=/move2kube/tutorials/createwincontainersnet/ title="Create and deploy Windows .NET containers" class=dd-item><a href=/move2kube/tutorials/createwincontainersnet/>Create and deploy Windows .NET containers</a></li><li data-nav-id=/move2kube/tutorials/migratedeploynetcore/ title="Migrate and deploy .NET Core applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploynetcore/>Migrate and deploy .NET Core applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedockercomposekube/ title="Migrate from Docker Compose to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedockercomposekube/>Migrate from Docker Compose to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedeploycfapps/ title="Migrate and deploy Cloud Foundry applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploycfapps/>Migrate and deploy Cloud Foundry applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/runnoninteractively/ title="Run transforms non-interactively" class=dd-item><a href=/move2kube/tutorials/runnoninteractively/>Run transforms non-interactively</a></li></ul></li></ul></li><li data-nav-id=/tackle/ title=Tackle class=dd-item><a href=/tackle/><b>4 </b>Tackle</a><ul><li data-nav-id=/tackle/upgradeto2/ title="Upgrading to 2.0" class=dd-item><a href=/tackle/upgradeto2/>Upgrading to 2.0</a></li><li data-nav-id=/tackle/admintasks/ title="Administrator view tasks" class=dd-item><a href=/tackle/admintasks/>Administrator view tasks</a></li><li data-nav-id=/tackle/views/ title=Views class=dd-item><a href=/tackle/views/>Views</a></li><li data-nav-id=/tackle/instances/ title="Seeding Instances" class=dd-item><a href=/tackle/instances/>Seeding Instances</a></li><li data-nav-id=/tackle/installation/ title="Installing Tackle" class=dd-item><a href=/tackle/installation/>Installing Tackle</a></li><li data-nav-id=/tackle/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/tackle/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/tackle/addapps/ title="Adding applications" class=dd-item><a href=/tackle/addapps/>Adding applications</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>3. Transform</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#transforming-using-the-cli>Transforming using the CLI</a></li><li><a href=#transforming-using-the-ui>Transforming using the UI</a></li><li><a href=#using-the-output-generated-by-move2kube-transform>Using the output generated by Move2Kube transform</a><ul><li><a href=#customizing-the-output>Customizing the output</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>3. Transform</h1><p>Now we can run the transformation according to the plan file generated in the previous step. The transformation phase runs all of the transformers again, but this time the transformers will use the plan to generate the output files.</p><p>During this process, the transformers might run into situations where it requires some more information to generate the output. In order to get this information, it will ask the user some questions. The questions range from yes/no, to multiple choice, to string input and most will have a default answer.</p><p>Example: Some of the questions Move2Kube will ask is about the type of container registry where you want to push the images to. It also needs to know the registry namespace and any authentication necessary for pulling images from that registry.</p><p>If you want to skip the QA, use the <code>--qa-skip</code> flag to accept the default answers. However, a config file that contains all of the answers using the <code>--config</code> flag can be used instead of skipping.</p><p>After the transformation is finished, all the answers are written to a config file called <code>m2kconfig.yaml</code> which can be used for later transformations.</p><p>The transformation phase produces all the necessary output files including the Dockerfiles, build scripts for containerizing various services and Kubernetes deployment, and the service and ingress YAMLs necessary for deploying the application to a Kubernetes cluster.</p><p>Move2Kube also generates the CI/CD pipeline and parameterized versions of all the Kubernetes YAMLs (Helm chart, Kustomize YAMLs, Openshift templates, etc.) for various environments (dev, staging, prod, etc.).</p><h2 id=prerequisites>Prerequisites</h2><p>Perform the Plan step before this procedure.</p><h2 id=transforming-using-the-cli>Transforming using the CLI</h2><ol><li>Run the transformation in the same directory as the plan file. This will detect the plan file and use it to find the source directory.</li></ol><pre tabindex=0><code>$ move2kube transform
Optional: Provide answers to questions using a config file...
</code></pre><p>If you want to avoid the question answers during transformation, you can use this <a href=https://github.com/konveyor/move2kube-demos/blob/main/samples/enterprise-app/config/m2kconfig.yaml>config file</a></p><pre tabindex=0><code>$ move2kube transform --config m2kconfig.yaml
</code></pre><ol start=2><li>Answer all the questions as appropriate. For most questions accept the default answers. Some questions to watch out for are:</li></ol><ul><li>A spurious service called <code>config-utils</code> was detected by one of the transformers can be deselected when asked to select the services or by editing the plan file.</li><li>Move2Kube has detected the Maven profiles for each of the Java services. Select the <code>dev-inmemorydb</code> profile to deploy to MiniKube. There will be similar questions for the SpringBoot profiles.</li><li>The container registry and namespace to use. A container registry is where all the images are stored (Example: Quay, Docker Hub, etc.).</li><li>The ingress hostname and ingress TLS secret. If deploying to MiniKube, give <code>localhost</code> as the ingress host and leave the TLS secret blank.</li><li>Select <code>ClusterIP</code> to only expose the <code>order</code> <code>customers</code> <code>inventory</code> and <code>gateway</code> services inside the cluster. Choose <code>Ingress</code> and <code>/</code> as the path to expose the <code>frontend</code> service. This way only the <code>frontend</code> will be exposed outside the cluster through the ingress.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform
</span></span><span style=display:flex><span>INFO[0000] Detected a plan file at path /Users/user/Desktop/tutorial/m2k.plan. Will transform using this plan.
</span></span><span style=display:flex><span>INFO[0000] Starting Plan Transformation 
</span></span><span style=display:flex><span>? Select all transformer types that you are interested in:
</span></span><span style=display:flex><span>ID: move2kube.transformers.types
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Services that don&#39;t support any of the transformer types you are interested in will be ignored.]
</span></span><span style=display:flex><span> Buildconfig, CloudFoundry, ClusterSelector, ComposeAnalyser, ComposeGenerator, ContainerImagesPushScriptGenerator, DockerfileDetector, DockerfileImageBuildScript, DockerfileParser, DotNetCore-Dockerfile,EarAnalyser, EarRouter, Golang-Dockerfile, Gradle, Jar, Jboss, Knative, Kubernetes, KubernetesVersionChanger, Liberty, Maven, Nodejs-Dockerfile, PHP-Dockerfile, Parameterizer, Python-Dockerfile, ReadMeGenerator,Ruby-Dockerfile, Rust-Dockerfile, Tekton, Tomcat, WarAnalyser, WarRouter, WinConsoleApp-Dockerfile, WinSLWebApp-Dockerfile, WinWebApp-Dockerfile, ZuulAnalyser
</span></span><span style=display:flex><span>? Select all services that are needed:
</span></span><span style=display:flex><span>ID: move2kube.services.[].enable
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The services unselected here will be ignored.]
</span></span><span style=display:flex><span> customers, frontend, gateway, inventory, orders
</span></span><span style=display:flex><span>INFO[0005] Iteration 1  
</span></span><span style=display:flex><span>INFO[0005] Iteration 2 - 5 artifacts to process 
</span></span><span style=display:flex><span>INFO[0005] Transformer CloudFoundry processing 3 artifacts
</span></span><span style=display:flex><span>INFO[0005] Transformer CloudFoundry Done
</span></span><span style=display:flex><span>INFO[0005] Transformer Maven processing 2 artifacts
</span></span></code></pre></div><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the remaining transform questions.</span></div><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>? Choose the Maven profile to be used for the service customers
</span></span><span style=display:flex><span>ID: move2kube.services.customers.activemavenprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Maven profiles will be used for setting configuration for the service customers]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Choose Springboot profiles to be used for the service customers
</span></span><span style=display:flex><span>ID: move2kube.services.customers.activespringbootprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Springboot profiles will be used for setting configuration for the service customers]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Choose the Maven profile to be used for the service inventory
</span></span><span style=display:flex><span>ID: move2kube.services.inventory.activemavenprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Maven profiles will be used for setting configuration for the service inventory]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Choose Springboot profiles to be used for the service inventory
</span></span><span style=display:flex><span>ID: move2kube.services.inventory.activespringbootprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Springboot profiles will be used for setting configuration for the service inventory]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Select port to be exposed for the service inventory :
</span></span><span style=display:flex><span>ID: move2kube.services.inventory.port
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Select Other if you want to expose the service inventory to some other port]
</span></span><span style=display:flex><span> 8080
</span></span><span style=display:flex><span>INFO[0010] Transformer WarRouter processing 2 artifacts
</span></span><span style=display:flex><span>? Select the transformer to use for service customers
</span></span><span style=display:flex><span>ID: move2kube.services.customers.wartransformer
</span></span><span style=display:flex><span> Tomcat
</span></span><span style=display:flex><span>INFO[0012] Transformer WarRouter Done   
</span></span><span style=display:flex><span>INFO[0012] Transformer Maven Done   
</span></span><span style=display:flex><span>INFO[0012] Created 2 pathMappings and 6 artifacts. Total Path Mappings : 2. Total Artifacts : 5.
</span></span><span style=display:flex><span>INFO[0012] Iteration 3 - 6 artifacts to process 
</span></span><span style=display:flex><span>INFO[0012] Transformer Jar processing 1 artifacts   
</span></span><span style=display:flex><span>INFO[0012] Transformer Jar Done 
</span></span><span style=display:flex><span>INFO[0012] Transformer Maven processing 2 artifacts 
</span></span><span style=display:flex><span>? Choose the Maven profile to be used for the service gateway
</span></span><span style=display:flex><span>ID: move2kube.services.gateway.activemavenprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Maven profiles will be used for setting configuration for the service gateway]
</span></span><span style=display:flex><span> prod
</span></span><span style=display:flex><span>? Choose Springboot profiles to be used for the service gateway
</span></span><span style=display:flex><span>ID: move2kube.services.gateway.activespringbootprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Springboot profiles will be used for setting configuration for the service gateway]
</span></span><span style=display:flex><span> prod
</span></span><span style=display:flex><span>? Select port to be exposed for the service gateway :
</span></span><span style=display:flex><span>ID: move2kube.services.gateway.port
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Select Other if you want to expose the service gateway to some other port]
</span></span><span style=display:flex><span> 8080
</span></span><span style=display:flex><span>? Choose the Maven profile to be used for the service orders
</span></span><span style=display:flex><span>ID: move2kube.services.orders.activemavenprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Maven profiles will be used for setting configuration for the service orders]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Choose Springboot profiles to be used for the service orders
</span></span><span style=display:flex><span>ID: move2kube.services.orders.activespringbootprofiles
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Selected Springboot profiles will be used for setting configuration for the service orders]
</span></span><span style=display:flex><span> prod-externaldb
</span></span><span style=display:flex><span>? Select port to be exposed for the service orders :
</span></span><span style=display:flex><span>ID: move2kube.services.orders.port
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Select Other if you want to expose the service orders to some other port]
</span></span><span style=display:flex><span> 8080
</span></span><span style=display:flex><span>INFO[0018] Transformer Maven Done   
</span></span><span style=display:flex><span>INFO[0018] Transformer Nodejs-Dockerfile processing 1 artifacts
</span></span><span style=display:flex><span>? Enter the port to be exposed for the service frontend:
</span></span><span style=display:flex><span>ID: move2kube.services.frontend.port
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The service frontend will be exposed to the specified port]
</span></span><span style=display:flex><span> 8080
</span></span><span style=display:flex><span>INFO[0021] Transformer Nodejs-Dockerfile Done   
</span></span><span style=display:flex><span>INFO[0021] Transformer Tomcat processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0021] Transformer Tomcat Done  
</span></span><span style=display:flex><span>INFO[0021] Created 10 pathMappings and 10 artifacts. Total Path Mappings : 12. Total Artifacts : 11.
</span></span><span style=display:flex><span>INFO[0021] Iteration 4 - 10 artifacts to process
</span></span><span style=display:flex><span>INFO[0021] Transformer DockerfileImageBuildScript processing 4 artifacts
</span></span><span style=display:flex><span>? Select the container runtime to use :
</span></span><span style=display:flex><span>ID: move2kube.containerruntime
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The container runtime selected will be used in the scripts]
</span></span><span style=display:flex><span> docker
</span></span><span style=display:flex><span>INFO[0022] Transformer DockerfileImageBuildScript Done  
</span></span><span style=display:flex><span>INFO[0022] Transformer DockerfileParser processing 4 artifacts
</span></span><span style=display:flex><span>INFO[0022] Transformer ZuulAnalyser processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0022] Transformer ZuulAnalyser Done
</span></span><span style=display:flex><span>INFO[0022] Transformer DockerfileParser Done
</span></span><span style=display:flex><span>INFO[0022] Transformer Jar processing 2 artifacts   
</span></span><span style=display:flex><span>INFO[0022] Transformer Jar Done 
</span></span><span style=display:flex><span>INFO[0022] Created 5 pathMappings and 10 artifacts. Total Path Mappings : 17. Total Artifacts : 21.
</span></span><span style=display:flex><span>INFO[0022] Iteration 5 - 10 artifacts to process
</span></span><span style=display:flex><span>INFO[0022] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>? Choose the cluster type:
</span></span><span style=display:flex><span>ID: move2kube.target.clustertype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose the cluster type you would like to target]
</span></span><span style=display:flex><span> Kubernetes
</span></span><span style=display:flex><span>INFO[0024] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0024] Transformer Buildconfig processing 2 artifacts
</span></span><span style=display:flex><span>? What kind of service/ingress to create for inventory&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;inventory&#34;.&#34;8080&#34;.servicetype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose Ingress if you want a ingress/route resource to be created]
</span></span><span style=display:flex><span> ClusterIP
</span></span><span style=display:flex><span>? What kind of service/ingress to create for frontend&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;frontend&#34;.&#34;8080&#34;.servicetype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose Ingress if you want a ingress/route resource to be created]
</span></span><span style=display:flex><span> Ingress
</span></span><span style=display:flex><span>? Specify the ingress path to expose frontend&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;frontend&#34;.&#34;8080&#34;.urlpath
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Leave out leading / to use first part as subdomain]
</span></span><span style=display:flex><span> /
</span></span><span style=display:flex><span>? What kind of service/ingress to create for customers&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;customers&#34;.&#34;8080&#34;.servicetype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose Ingress if you want a ingress/route resource to be created]
</span></span><span style=display:flex><span> ClusterIP
</span></span><span style=display:flex><span>? Provide the minimum number of replicas each service should have
</span></span><span style=display:flex><span>ID: move2kube.minreplicas
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[If the value is 0 pods won&#39;t be started by default]
</span></span><span style=display:flex><span> 2
</span></span><span style=display:flex><span>? Enter the URL of the image registry :
</span></span><span style=display:flex><span>ID: move2kube.target.imageregistry.url
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[You can always change it later by changing the yamls.]
</span></span><span style=display:flex><span> quay.io
</span></span><span style=display:flex><span>? Enter the namespace where the new images should be pushed :
</span></span><span style=display:flex><span>ID: move2kube.target.imageregistry.namespace
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Ex : myproject]
</span></span><span style=display:flex><span> move2kube
</span></span><span style=display:flex><span>? [quay.io] What type of container registry login do you want to use?
</span></span><span style=display:flex><span>ID: move2kube.target.imageregistry.logintype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Docker login from config mode, will use the default config from the local machine.]
</span></span><span style=display:flex><span> No authentication
</span></span><span style=display:flex><span>INFO[0051] Transformer Buildconfig Done 
</span></span><span style=display:flex><span>INFO[0051] Transformer ComposeGenerator processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ComposeGenerator Done
</span></span><span style=display:flex><span>INFO[0051] Transformer ContainerImagesPushScriptGenerator processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ContainerImagesPushScriptGenerator Done
</span></span><span style=display:flex><span>INFO[0051] Transformer DockerfileImageBuildScript processing 3 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer DockerfileImageBuildScript Done  
</span></span><span style=display:flex><span>INFO[0051] Transformer DockerfileParser processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ZuulAnalyser processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ZuulAnalyser Done
</span></span><span style=display:flex><span>INFO[0051] Transformer DockerfileParser Done
</span></span><span style=display:flex><span>INFO[0051] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0051] Transformer Knative processing 2 artifacts   
</span></span><span style=display:flex><span>INFO[0051] Transformer Knative Done 
</span></span><span style=display:flex><span>INFO[0051] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0051] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0051] Transformer Kubernetes processing 2 artifacts
</span></span><span style=display:flex><span>? Provide the ingress host domain
</span></span><span style=display:flex><span>ID: move2kube.target.ingress.host
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Ingress host domain is part of service URL]
</span></span><span style=display:flex><span> localhost
</span></span><span style=display:flex><span>? Provide the TLS secret for ingress
</span></span><span style=display:flex><span>ID: move2kube.target.ingress.tls
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Leave empty to use http]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>INFO[0058] Transformer Kubernetes Done  
</span></span><span style=display:flex><span>INFO[0058] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0058] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0058] Transformer Tekton processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0059] Transformer Tekton Done  
</span></span><span style=display:flex><span>INFO[0059] Created 32 pathMappings and 15 artifacts. Total Path Mappings : 49. Total Artifacts : 31.
</span></span><span style=display:flex><span>INFO[0059] Iteration 6 - 15 artifacts to process
</span></span><span style=display:flex><span>INFO[0059] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0059] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0059] Transformer Buildconfig processing 2 artifacts
</span></span><span style=display:flex><span>? What kind of service/ingress to create for orders&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;orders&#34;.&#34;8080&#34;.servicetype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose Ingress if you want a ingress/route resource to be created]
</span></span><span style=display:flex><span> ClusterIP
</span></span><span style=display:flex><span>? What kind of service/ingress to create for gateway&#39;s 8080 port?
</span></span><span style=display:flex><span>ID: move2kube.services.&#34;gateway&#34;.&#34;8080&#34;.servicetype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose Ingress if you want a ingress/route resource to be created]
</span></span><span style=display:flex><span> ClusterIP
</span></span><span style=display:flex><span>INFO[0066] Transformer Buildconfig Done 
</span></span><span style=display:flex><span>INFO[0066] Transformer ComposeGenerator processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0066] Transformer ComposeGenerator Done
</span></span><span style=display:flex><span>INFO[0066] Transformer ContainerImagesPushScriptGenerator processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0066] Transformer ContainerImagesPushScriptGenerator Done
</span></span><span style=display:flex><span>INFO[0066] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0067] Transformer Knative processing 2 artifacts   
</span></span><span style=display:flex><span>INFO[0067] Transformer Knative Done 
</span></span><span style=display:flex><span>INFO[0067] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0067] Transformer Kubernetes processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer Kubernetes Done  
</span></span><span style=display:flex><span>INFO[0067] Transformer Parameterizer processing 4 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer Parameterizer Done   
</span></span><span style=display:flex><span>INFO[0067] Transformer ReadMeGenerator processing 5 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer ReadMeGenerator Done 
</span></span><span style=display:flex><span>INFO[0067] Transformer ClusterSelector processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0067] Transformer ClusterSelector Done 
</span></span><span style=display:flex><span>INFO[0067] Transformer Tekton processing 2 artifacts
</span></span><span style=display:flex><span>INFO[0068] Transformer Tekton Done  
</span></span><span style=display:flex><span>INFO[0068] Created 52 pathMappings and 7 artifacts. Total Path Mappings : 101. Total Artifacts : 46.
</span></span><span style=display:flex><span>INFO[0068] Iteration 7 - 7 artifacts to process 
</span></span><span style=display:flex><span>INFO[0068] Transformer Parameterizer processing 4 artifacts
</span></span><span style=display:flex><span>INFO[0068] Transformer Parameterizer Done   
</span></span><span style=display:flex><span>INFO[0068] Transformer ReadMeGenerator processing 5 artifacts
</span></span><span style=display:flex><span>INFO[0068] Transformer ReadMeGenerator Done 
</span></span><span style=display:flex><span>INFO[0069] Plan Transformation done 
</span></span><span style=display:flex><span>INFO[0069] Transformed target artifacts can be found at [/Users/user/Desktop/tutorial/myproject].
</span></span></code></pre></div></div></div><h2 id=transforming-using-the-ui>Transforming using the UI</h2><p>Continue from the previous step in the UI.</p><ol><li>Scroll down from the <strong>Plan</strong> section to the <strong>Outputs</strong> section.</li></ol><pre tabindex=0><code class=language-consle data-lang=consle>spec:
    sourceDir:sources
    services:
        config-utils:
            -transformerName: Maven
             paths:
                MavenPom:
                 -src/src/config-utils/pom.xml
                ServiceDirPath:
                 -src/src/config-utils
             configs:
                Maven:
                 mavenAppName: config-utils
                 artifactType: jar
            customers-tomcat:
             - transformerName: Maven
                 
</code></pre><ol start=2><li>Click the <strong>Start transformation</strong> button.</li></ol><p>A form to ask the user questions to guide the transformation opens.</p><ol start=3><li>Answer all the questions as appropriate. For most questions accept the default answers. Some questions to watch out for are:</li></ol><ul><li>A spurious service called <code>config-utils</code> was detected by one of the transformers can be deselected when asked to select the services or by editing the plan file.</li><li>Move2Kube has detected the Maven profiles for each of the Java services. Select the <code>dev-inmemorydb</code> profile to deploy to MiniKube. There will be similar questions for the SpringBoot profiles.</li><li>The container registry and namespace to use. A container registry is where all the images are stored (Example: Quay, Docker Hub, etc.).</li><li>The ingress hostname and ingress TLS secret. If deploying to MiniKube, give <code>localhost</code> as the ingress host and leave the TLS secret blank.</li><li>Select <code>ClusterIP</code> to only expose the <code>order</code> <code>customers</code> <code>inventory</code> and <code>gateway</code> services inside the cluster. Choose <code>Ingress</code> and <code>/</code> as the path to expose the <code>frontend</code> service. This way only the <code>frontend</code> will be exposed outside the cluster through the ingress.</li></ul><ol start=4><li>Click the <strong>Next</strong> button to continue going through the questions and then run the tranformation.</li></ol><p>Move2Kube processes the transformation and the output appears.</p><ol start=5><li>Click the output ID link to download.</li></ol><h2 id=using-the-output-generated-by-move2kube-transform>Using the output generated by Move2Kube transform</h2><p>For a sample output of what Move2Kube generates for this enterprise app, see <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/enterprise-app/output>this</a></p><p>After the output has generated, run the scripts inside the <code>scripts</code> directory.</p><ol><li>Run the <code>builddockerimages.sh</code> script to build all the container images for each service using the Dockerfiles that were generated.</li></ol><pre tabindex=0><code>$ cd myproject/scripts/
$ ./builddockerimages.sh
</code></pre><ol start=2><li>Run the <code>pushimages.sh</code> script to push them to the specified container registry.</li></ol><pre tabindex=0><code>$ ./pushimages.sh
</code></pre><ol start=3><li>Because the <code>prod-externaldb</code> profile was selected, deploy the database using the YAMLs located <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/enterprise-app/database>here</a>.</li></ol><pre tabindex=0><code>$ cd ..
$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/database -r move2kube-demos
$ minikube start --memory 8192 --cpus 2 # do this only if you are deploying to Minikube
$ kubectl apply -f database/
</code></pre><ol start=4><li>Deploy the Kubernetes YAMLs that Move2Kube generated to the cluster</li></ol><pre tabindex=0><code>$ kubectl apply -f deploy/yamls
</code></pre><p>The application is now running on the cluster.</p><ol start=5><li>Get the URL where the app has been deployed to, using <code>kubectl get ingress myproject -o yaml</code></li></ol><blockquote><p><strong>Note:</strong> If deployed to Minikube, enable the ingress addon and start <code>minikube tunnel</code> to access the ingress on <code>localhost</code>.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ minikube addons enable ingress
</span></span><span style=display:flex><span>üí°  After the addon is enabled, please run &#34;minikube tunnel&#34; and the ingress resources would be available at &#34;127.0.0.1&#34;
</span></span><span style=display:flex><span>‚ñ™ Using image k8s.gcr.io/ingress-nginx/controller:v1.0.4
</span></span><span style=display:flex><span>‚ñ™ Using image k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1
</span></span><span style=display:flex><span>‚ñ™ Using image k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1
</span></span><span style=display:flex><span>üîé  Verifying ingress addon...
</span></span><span style=display:flex><span>üåü  The &#39;ingress&#39; addon is enabled
</span></span><span style=display:flex><span>$ minikube addons enable ingress-dns
</span></span><span style=display:flex><span>üí°  After the addon is enabled, please run &#34;minikube tunnel&#34; and the ingress resources would be available at &#34;127.0.0.1&#34;
</span></span><span style=display:flex><span>‚ñ™ Using image gcr.io/k8s-minikube/minikube-ingress-dns:0.0.2
</span></span><span style=display:flex><span>üåü  The &#39;ingress-dns&#39; addon is enabled
</span></span><span style=display:flex><span>$ minikube tunnel
</span></span><span style=display:flex><span>‚ùó  The service/ingress myproject requires privileged ports to be exposed: [80 443]
</span></span><span style=display:flex><span>üîë  sudo permission will be asked for it.
</span></span><span style=display:flex><span>üèÉ  Starting tunnel for service myproject.
</span></span><span style=display:flex><span>Password:
</span></span></code></pre></div><p>The app is now available on <a href=http://localhost>http://localhost</a>.</p><blockquote><p><strong>Optional:</strong> As part of the transformation, if Cloud Foundry runtime information is required, use the collect output in planning and transformation: Collect information from running apps.</p></blockquote><h3 id=customizing-the-output>Customizing the output</h3><p>After inspecting the output that Move2Kube produced some changes might be necessary. For example:</p><ul><li>Changing the base image used in the Dockerfiles.</li><li>Adding some annotations to the Ingress YAML.</li><li>Changing the output directory structure.</li><li>Changing which values are parameterized in the Helm chart.</li><li>Generating some new files, etc.</li></ul><p>For all these user specific requirements and more, use customizations.</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script>
<script src=/js/perfect-scrollbar.min.js></script>
<script src=/js/perfect-scrollbar.jquery.min.js></script>
<script src=/js/jquery.sticky.js></script>
<script src=/js/featherlight.min.js></script>
<script src=/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script>
<script src=/js/learn.js></script>
<script src=/js/hugo-learn.js></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>