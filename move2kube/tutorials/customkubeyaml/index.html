<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.120.4"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Customize Kubernetes YAMLs to target specific clusters - Documentation for Konveyor projects</title>
<link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Customize Kubernetes YAMLs to target specific clusters",fileUniqID:"0d2271d6664461821c2eb2f426abc965"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/move2kube/tutorials/customkubeyaml/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/konveyor/ title=Konveyor class=dd-item><a href=/konveyor/>Konveyor</a><ul><li data-nav-id=/konveyor/contributetokonveyor/ title="Contributing To Konveyor" class=dd-item><a href=/konveyor/contributetokonveyor/>Contributing To Konveyor</a></li><li data-nav-id=/konveyor/admintasks/ title="Administrator view tasks" class=dd-item><a href=/konveyor/admintasks/>Administrator view tasks</a></li><li data-nav-id=/konveyor/views/ title=Views class=dd-item><a href=/konveyor/views/>Views</a></li><li data-nav-id=/konveyor/instances/ title="Seeding Instances" class=dd-item><a href=/konveyor/instances/>Seeding Instances</a></li><li data-nav-id=/konveyor/installation/ title="Installing Konveyor" class=dd-item><a href=/konveyor/installation/>Installing Konveyor</a></li><li data-nav-id=/konveyor/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/konveyor/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/konveyor/addapps/ title="Adding applications" class=dd-item><a href=/konveyor/addapps/>Adding applications</a></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class="dd-item
parent"><a href=/move2kube/>Move2Kube</a><ul><li data-nav-id=/move2kube/concepts/ title=Concepts class=dd-item><a href=/move2kube/concepts/>Concepts</a></li><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a><ul><li data-nav-id=/move2kube/installation/installweb/ title="Web Interface" class=dd-item><a href=/move2kube/installation/installweb/>Web Interface</a></li><li data-nav-id=/move2kube/installation/installcli/ title="Command line tool" class=dd-item><a href=/move2kube/installation/installcli/>Command line tool</a></li></ul></li><li data-nav-id=/move2kube/commands/ title=Commands class=dd-item><a href=/move2kube/commands/>Commands</a></li><li data-nav-id=/move2kube/transformers/ title=Transformers class=dd-item><a href=/move2kube/transformers/>Transformers</a></li><li data-nav-id=/move2kube/tutorials/ title=Tutorials class="dd-item
parent"><a href=/move2kube/tutorials/>Tutorials</a><ul><li data-nav-id=/move2kube/tutorials/usingcli/ title="Using Move2Kube CLI" class=dd-item><a href=/move2kube/tutorials/usingcli/>Using Move2Kube CLI</a></li><li data-nav-id=/move2kube/tutorials/usingui/ title="Using Move2Kube UI" class=dd-item><a href=/move2kube/tutorials/usingui/>Using Move2Kube UI</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/ title="Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes" class=dd-item><a href=/move2kube/tutorials/cfappstok8/>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</a><ul><li data-nav-id=/move2kube/tutorials/cfappstok8/1collect/ title="1. Collect" class=dd-item><a href=/move2kube/tutorials/cfappstok8/1collect/>1. Collect</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/2plan/ title="2. Plan" class=dd-item><a href=/move2kube/tutorials/cfappstok8/2plan/>2. Plan</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/3transform/ title="3. Transform" class=dd-item><a href=/move2kube/tutorials/cfappstok8/3transform/>3. Transform</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customizeoutput/ title="Customizing the output" class=dd-item><a href=/move2kube/tutorials/customizeoutput/>Customizing the output</a><ul><li data-nav-id=/move2kube/tutorials/customizeoutput/addcustfiledir/ title="Add custom files and directories in custom locations" class=dd-item><a href=/move2kube/tutorials/customizeoutput/addcustfiledir/>Add custom files and directories in custom locations</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ title="Parameterizing custom fields in Helm Chart, Kustomize, OC templates" class=dd-item><a href=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customannotationsyaml/ title="Add custom annotations to Kubernetes YAMLs" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customannotationsyaml/>Add custom annotations to Kubernetes YAMLs</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customgendockerfile/ title="Customize generated Dockerfile and built-in transformer behavior" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customgendockerfile/>Customize generated Dockerfile and built-in transformer behavior</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customkubeyaml/ title="Customize Kubernetes YAMLs to target specific clusters" class="dd-item active"><a href=/move2kube/tutorials/customkubeyaml/>Customize Kubernetes YAMLs to target specific clusters</a></li><li data-nav-id=/move2kube/tutorials/createhelmchartskustomize/ title="Create Helm-charts, Kustomize overlays from Kubernetes Yamls" class=dd-item><a href=/move2kube/tutorials/createhelmchartskustomize/>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</a></li><li data-nav-id=/move2kube/tutorials/createwincontainersnet/ title="Create and deploy Windows .NET containers" class=dd-item><a href=/move2kube/tutorials/createwincontainersnet/>Create and deploy Windows .NET containers</a></li><li data-nav-id=/move2kube/tutorials/migratedeploynetcore/ title="Migrate and deploy .NET Core applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploynetcore/>Migrate and deploy .NET Core applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedockercomposekube/ title="Migrate from Docker Compose to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedockercomposekube/>Migrate from Docker Compose to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedeploycfapps/ title="Migrate and deploy Cloud Foundry applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploycfapps/>Migrate and deploy Cloud Foundry applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/runnoninteractively/ title="Run transforms non-interactively" class=dd-item><a href=/move2kube/tutorials/runnoninteractively/>Run transforms non-interactively</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Customize Kubernetes YAMLs to target specific clusters</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#exploring-the-output>Exploring the output</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Customize Kubernetes YAMLs to target specific clusters</h1><p>Move2Kube already supports targeting across multiple clusters including: Kubernetes, Openshift, IBM-IKS, IBM-Openshift, Azure-EKS, Azure-AKS and GCP-GKS. There might be situations that require generating Kubernetes YAMLs to target a particular cluster. This tutorial shows how to use Konveyor Move2Kube to change the versions of existing Kubernetes resources to target a particular cluster. Move2Kube can also be customized to generate Kubernetes YAMLS deployable on a particular cluster.</p><p><strong>Prerequisites</strong></p><ol><li><p>Install the Move2Kube CLI tool.</p></li><li><p>Install <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl>Kubectl</a>.</p></li><li><p>Use the <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/kubernetes-to-kubernetes>kubernetes-to-kubernetes</a> sample. This directory has some Kubernetes YAMLs that deploy a web app with multiple services. There are three services: a frontend website in PHP, a backend API in NodeJS, and a cache service using Redis.</p></li></ol><p><strong>Procedure</strong></p><ol><li>Collect data about the Kubernetes cluster using <code>move2kube collect</code>. Limit the collection to only cluster information using the <code>-a k8s</code> annotation flag.</li></ol><blockquote><p><strong>Note:</strong> Before running the below command, log in to the target cluster. To verify, run <code>kubectl get pods</code>.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube collect -a k8s
</span></span><span style=display:flex><span>INFO[0000] Begin collection
</span></span><span style=display:flex><span>INFO[0000] [*collector.ClusterCollector] Begin collection
</span></span><span style=display:flex><span>INFO[0006] [*collector.ClusterCollector] Done   
</span></span><span style=display:flex><span>INFO[0006] [*collector.ImagesCollector] Begin collection
</span></span><span style=display:flex><span>INFO[0006] [*collector.ImagesCollector] Done
</span></span><span style=display:flex><span>INFO[0006] Collection done  
</span></span><span style=display:flex><span>INFO[0006] Collect Output in [/Users/user/m2k_collect]. Copy this directory into the source directory to be used for planning.
</span></span></code></pre></div><p>The data collected will be stored in a new directory called <code>./m2k_collect</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ ls m2k_collect
</span></span><span style=display:flex><span>cf
</span></span></code></pre></div><p>The <code>./m2k_collect/clusters</code> directory contains the YAML file which has the cluster application information including the buildpacks that are supported, the memory, the number of instances and the ports that are supported. If there are environment variables, it collects that information too. The name of the cluster can be found in the <code>metadata.name</code> file, and can be renamed in the YAML file.</p><ul><li><p>For this tutorial, the <code>move2kube collect</code> output YAML file which contains the cluster related information is stored <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector/clusters/my-kubernetes-cluster.yaml>here</a>. The cluster <code>metadata.name</code> was renamed as <code>my-kubernetes-cluster</code> in the YAML file.</p></li><li><p>Use a <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector>custom configured version</a> of the <a href=https://github.com/konveyor/move2kube/tree/main/assets/built-in/transformers/kubernetes/clusterselector>clusterselector transformer</a>.</p></li></ul><ol start=2><li>Download the <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector>custom-cluster-selector</a> transformer into the <code>customizations</code> sub-directory.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d custom-cluster-selector -r move2kube-transformers -o customizations
</span></span></code></pre></div><p>The <code>customizations/custom-cluster-selector/transformer.yaml</code> is the transformer configuration. There are two changes in the <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector/transformer.yaml>custom-cluster-selector/transformer.yaml</a> compared to the built-in <a href=https://github.com/konveyor/move2kube/tree/main/assets/built-in/transformers/kubernetes/clusterselector/transformer.yaml>clusterselector/transformer.yaml</a> :</p><ul><li>The name of the custom transformer is <code>CustomClusterSelector</code> (see <code>name</code> field in the <code>metadata</code> section).</li><li>Specify an <code>override</code> section which is asking Move2Kube to disable the transformer named <code>ClusterSelector</code> if <code>CustomClusterSelector</code> transformer is present.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ cat customizations/custom-cluster-selector/transformer.yaml
</span></span><span style=display:flex><span>  apiVersion: move2kube.konveyor.io/v1alpha1
</span></span><span style=display:flex><span>  kind: Transformer
</span></span><span style=display:flex><span>  metadata:
</span></span><span style=display:flex><span>    name: CustomClusterSelector
</span></span><span style=display:flex><span>    labels:
</span></span><span style=display:flex><span>      move2kube.konveyor.io/built-in: true
</span></span><span style=display:flex><span>      move2kube.konveyor.io/kubernetesclusterselector: true
</span></span><span style=display:flex><span>  spec:
</span></span><span style=display:flex><span>    class: &#34;ClusterSelectorTransformer&#34;
</span></span><span style=display:flex><span>    directoryDetect:
</span></span><span style=display:flex><span>      levels: 0
</span></span><span style=display:flex><span>    consumes:
</span></span><span style=display:flex><span>      IR:
</span></span><span style=display:flex><span>        merge: true
</span></span><span style=display:flex><span>        mode: OnDemandPassThrough
</span></span><span style=display:flex><span>      KubernetesOrgYamlsInSource:
</span></span><span style=display:flex><span>        merge: false
</span></span><span style=display:flex><span>        mode: OnDemandPassThrough
</span></span><span style=display:flex><span>    produces:
</span></span><span style=display:flex><span>      IR:
</span></span><span style=display:flex><span>        disabled: false
</span></span><span style=display:flex><span>      KubernetesOrgYamlsInSource:
</span></span><span style=display:flex><span>        disabled: false
</span></span><span style=display:flex><span>    override:
</span></span><span style=display:flex><span>      matchLabels:
</span></span><span style=display:flex><span>        move2kube.konveyor.io/name: ClusterSelector
</span></span></code></pre></div><p>To check what information <code>move2kube collect -a k8s</code> collected, view the content inside the <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector/clusters/my-kubernetes-cluster.yaml>my-kubernetes-cluster.yaml</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ cat customizations/custom-cluster-selector/clusters/my-kubernetes-cluster.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterMetadata</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>my-kubernetes-cluster</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>storageClasses</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ibmc-file-bronze</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ibmc-file-bronze-gid</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ibmc-file-custom</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ibmc-file-gold</span>
</span></span></code></pre></div><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the rest of the yaml.</span></div><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#ae81ff>ibmc-file-gold-gid</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-retain-bronze</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-retain-custom</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-retain-gold</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-retain-silver</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-silver</span>
</span></span><span style=display:flex><span>     - <span style=color:#ae81ff>ibmc-file-silver-gid</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>apiKindVersionMap</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>APIService</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apiregistration.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>BGPConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>BGPPeer</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Binding</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>BlockAffinity</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CSIDriver</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CSINode</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CSIStorageCapacity</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>storage.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CatalogSource</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CertificateSigningRequest</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>certificates.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ClusterInformation</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ClusterRole</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ClusterRoleBinding</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ClusterServiceVersion</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ComponentStatus</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ConfigMap</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ControllerRevision</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CronJob</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>batch/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>batch/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CustomResourceDefinition</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apiextensions.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DaemonSet</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Deployment</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>EndpointSlice</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>discovery.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>discovery.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Endpoints</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Event</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>events.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>events.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Eviction</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>FelixConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>FlowSchema</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>flowcontrol.apiserver.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>GlobalNetworkPolicy</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>GlobalNetworkSet</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>GuestBook</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>webapp.metamagical.dev/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>HorizontalPodAutoscaler</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>autoscaling/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>autoscaling/v2beta1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>autoscaling/v2beta2</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>HostEndpoint</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>IPAMBlock</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>IPAMConfig</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>IPAMHandle</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>IPPool</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Ingress</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>IngressClass</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>InstallPlan</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Job</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>batch/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>KubeControllersConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Lease</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>coordination.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>LimitRange</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>LocalSubjectAccessReview</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>MutatingWebhookConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>admissionregistration.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Namespace</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>NetworkPolicy</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>NetworkSet</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>crd.projectcalico.org/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Node</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>NodeMetrics</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>metrics.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>NodeProxyOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Operator</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>OperatorGroup</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1alpha2</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PersistentVolume</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PersistentVolumeClaim</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Pod</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodAttachOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodDisruptionBudget</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>policy/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>policy/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodExecOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodMetrics</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>metrics.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodPortForwardOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodProxyOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodSecurityPolicy</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>policy/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PodTemplate</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PriorityClass</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>scheduling.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PriorityLevelConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>flowcontrol.apiserver.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>RBACSync</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>ibm.com/v1alpha1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Redis</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>webapp.metamagical.dev/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ReplicaSet</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ReplicationController</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ResourceQuota</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Role</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>RoleBinding</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>RuntimeClass</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>node.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>node.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Scale</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Secret</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>SelfSubjectAccessReview</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>SelfSubjectRulesReview</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Service</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ServiceAccount</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ServiceProxyOptions</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>StatefulSet</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>StorageClass</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>SubjectAccessReview</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Subscription</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>TokenRequest</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>TokenReview</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>authentication.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ValidatingWebhookConfiguration</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>admissionregistration.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>VolumeAttachment</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>VolumeSnapshot</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>VolumeSnapshotClass</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>VolumeSnapshotContent</span>:
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1</span>
</span></span><span style=display:flex><span>       - <span style=color:#ae81ff>snapshot.storage.k8s.io/v1beta1</span>
</span></span></code></pre></div></div></div><p>The <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector/clusters/my-kubernetes-cluster.yaml>my-kubernetes-cluster.yaml</a> has information about the target cluster under the <code>spec</code> field, including the <code>storageClasses</code>, <code>Deployment</code>, <code>Service</code>, <code>Ingress</code> and <code>NetworkPolicy</code> versions supported by the target cluster. Move2Kube will use this information and generate the Kubernetes YAMLs which are tailored for the given target cluster.</p><ol start=3><li>Download the <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/kubernetes-to-kubernetes>kubernetes-to-kubernetes</a> sample.</li></ol><pre tabindex=0><code>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/kubernetes-to-kubernetes -r move2kube-demos
$ ls kubernetes-to-kubernetes/
api-deployment.yaml  api-service.yaml  redis-deployment.yaml  redis-service.yaml  web-deployment.yaml  web-ingress.yaml  web-service.yaml
</code></pre><ol start=4><li>Generate a plan file by providing the <code>custom-cluster-selector</code> transformer inside the downloaded <code>customizations</code> folder to Move2Kube using the <code>-c flag</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube plan -s kubernetes-to-kubernetes -c customizations
</span></span><span style=display:flex><span>INFO[0000] Configuration loading done
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Base Directory
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Done
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Done
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Done
</span></span><span style=display:flex><span>INFO[0000] [Base Directory] Identified 0 named services and 0 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Base Directory done
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Directory Walk
</span></span><span style=display:flex><span>INFO[0000] Identified 1 named services and 0 to-be-named services in .
</span></span><span style=display:flex><span>INFO[0000] Identified 1 named services and 0 to-be-named services in .
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Directory Walk done
</span></span><span style=display:flex><span>INFO[0000] [Directory Walk] Identified 1 named services and 1 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] [Named Services] Identified 1 named services
</span></span><span style=display:flex><span>INFO[0000] No of services identified : 1
</span></span><span style=display:flex><span>INFO[0000] Plan can be found at [/Users/user/m2k.plan].
</span></span></code></pre></div><ol start=5><li>View the generated plan file in YAML format. Notice Move2Kube has detected the <code>custom-cluster-selector</code> as <code>customizationsDir</code> which will be used during the <em>Transform</em> phase.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ cat m2k.plan
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Plan</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myproject</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>sourceDir</span>: <span style=color:#ae81ff>kubernetes-to-kubernetes</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>customizationsDir</span>: <span style=color:#ae81ff>custom-cluster-selector</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Plan</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myproject</span>
</span></span></code></pre></div><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the rest of the yaml.</span></div><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span> <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>sourceDir</span>: <span style=color:#ae81ff>kubernetes-to-kubernetes</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>customizationsDir</span>: <span style=color:#ae81ff>custom-cluster-selector</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>move2kube-transformers</span>:
</span></span><span style=display:flex><span>       - <span style=color:#f92672>transformerName</span>: <span style=color:#ae81ff>Parameterizer</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>KubernetesYamls</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>ServiceDirPath</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>       - <span style=color:#f92672>transformerName</span>: <span style=color:#ae81ff>KubernetesVersionChanger</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>type</span>: <span style=color:#ae81ff>KubernetesOrgYamlsInSource</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>KubernetesYamls</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>ServiceDirPath</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>transformers</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>Buildconfig</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/buildconfig/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CloudFoundry</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/cloudfoundry/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ComposeAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/compose/composeanalyser/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ComposeGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/compose/composegenerator/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ContainerImagesPushScriptGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/containerimagespushscript/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CustomClusterSelector</span>: <span style=color:#ae81ff>m2kassets/custom/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileDetector</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerfiledetector/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileImageBuildScript</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerimagebuildscript/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileParser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerfileparser/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DotNetCore-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/dotnetcore/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>EarAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/earanalyser/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>EarRouter</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/earrouter/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Golang-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/golang/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Gradle</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/gradle/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Jar</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/jar/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Jboss</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/jboss/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Knative</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/knative/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Kubernetes</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/kubernetes/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>KubernetesVersionChanger</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/kubernetesversionchanger/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Liberty</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/liberty/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Maven</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/maven/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Nodejs-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/nodejs/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PHP-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/php/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Parameterizer</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/parameterizer/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Python-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/python/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ReadMeGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/readmegenerator/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Ruby-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/ruby/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Rust-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/rust/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Tekton</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/tekton/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Tomcat</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/tomcat/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WarAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/waranalyser/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WarRouter</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/warrouter/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinConsoleApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winconsole/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinSLWebApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winsilverlightweb/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinWebApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winweb/transformer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ZuulAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/zuul/transformer.yaml</span>
</span></span></code></pre></div></div></div><ol start=6><li>Run the transformation using <code>move2kube transform</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform
</span></span><span style=display:flex><span>INFO[0000] Detected a plan file at path /home/user/m2k.plan. Will transform using this plan.
</span></span><span style=display:flex><span>? Select all transformer types that you are interested in:
</span></span><span style=display:flex><span>ID: move2kube.transformers.types
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Services that don&#39;t support any of the transformer types you are interested in will be ignored.]
</span></span><span style=display:flex><span>  [Use arrows to move, space to select, &lt;right&gt; to all, &lt;left&gt; to none, type to filter]
</span></span><span style=display:flex><span>&gt; <span style=color:#f92672>[</span>✓<span style=color:#f92672>]</span>  Maven
</span></span><span style=display:flex><span>  [✓]  Rust-Dockerfile
</span></span><span style=display:flex><span>  [✓]  Tomcat
</span></span><span style=display:flex><span>  [✓]  ZuulAnalyser
</span></span><span style=display:flex><span>  [✓]  CustomClusterSelector
</span></span><span style=display:flex><span>  [✓]  Jboss
</span></span><span style=display:flex><span>  [✓]  Parameterizer
</span></span><span style=display:flex><span>  [✓]  ReadMeGenerator
</span></span><span style=display:flex><span>  [✓]  WarRouter
</span></span><span style=display:flex><span>  [✓]  DockerfileDetector
</span></span><span style=display:flex><span>  [✓]  Gradle
</span></span><span style=display:flex><span>  [✓]  Python-Dockerfile
</span></span><span style=display:flex><span>  [✓]  WinConsoleApp-Dockerfile
</span></span><span style=display:flex><span>  [✓]  Buildconfig
</span></span><span style=display:flex><span>  [✓]  EarAnalyser
</span></span><span style=display:flex><span>  [✓]  Knative
</span></span><span style=display:flex><span>  [✓]  Nodejs-Dockerfile
</span></span><span style=display:flex><span>  [✓]  WinSLWebApp-Dockerfile
</span></span><span style=display:flex><span>  [✓]  ContainerImagesPushScriptGenerator
</span></span><span style=display:flex><span>  [✓]  DockerfileImageBuildScript
</span></span><span style=display:flex><span>  [✓]  Tekton
</span></span><span style=display:flex><span>  [✓]  DotNetCore-Dockerfile
</span></span><span style=display:flex><span>  [✓]  Liberty
</span></span><span style=display:flex><span>  [✓]  DockerfileParser
</span></span><span style=display:flex><span>  [✓]  Golang-Dockerfile
</span></span><span style=display:flex><span>  [✓]  WinWebApp-Dockerfile
</span></span><span style=display:flex><span>  [✓]  CloudFoundry
</span></span><span style=display:flex><span>  [✓]  ComposeGenerator
</span></span><span style=display:flex><span>  [✓]  Kubernetes
</span></span><span style=display:flex><span>  [✓]  Ruby-Dockerfile
</span></span><span style=display:flex><span>  [✓]  WarAnalyser
</span></span><span style=display:flex><span>  [✓]  ComposeAnalyser
</span></span><span style=display:flex><span>  [✓]  Jar
</span></span><span style=display:flex><span>  [✓]  PHP-Dockerfile
</span></span><span style=display:flex><span>  [✓]  EarRouter
</span></span><span style=display:flex><span>  [✓]  KubernetesVersionChanger
</span></span></code></pre></div><ol start=7><li>Accept the default by pressing the <strong>Enter</strong> key.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>? Select all services that are needed:
</span></span><span style=display:flex><span>ID: move2kube.services.[].enable
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The services unselected here will be ignored.]
</span></span><span style=display:flex><span>  [Use arrows to move, space to select, &lt;right&gt; to all, &lt;left&gt; to none, type to filter]
</span></span><span style=display:flex><span>&gt; <span style=color:#f92672>[</span>✓<span style=color:#f92672>]</span>  myproject
</span></span></code></pre></div><ol start=8><li>Accept the detected service.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>INFO[0017] Starting Plan Transformation
</span></span><span style=display:flex><span>INFO[0017] Iteration 1  
</span></span><span style=display:flex><span>INFO[0017] Iteration 2 - 1 artifacts to process
</span></span><span style=display:flex><span>INFO[0017] Transformer CustomClusterSelector processing 1 artifacts
</span></span><span style=display:flex><span>? Choose the cluster type:
</span></span><span style=display:flex><span>ID: move2kube.target.clustertype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose the cluster type you would like to target]
</span></span><span style=display:flex><span>  [Use arrows to move, type to filter]
</span></span><span style=display:flex><span>  GCP-GKE
</span></span><span style=display:flex><span>  IBM-IKS
</span></span><span style=display:flex><span>  IBM-Openshift
</span></span><span style=display:flex><span>  Kubernetes
</span></span><span style=display:flex><span>&gt; my-kubernetes-cluster
</span></span><span style=display:flex><span>  Openshift
</span></span><span style=display:flex><span>  AWS-EKS
</span></span><span style=display:flex><span>  Openshift
</span></span></code></pre></div><ol start=9><li>Select <code>my-kubernetes-cluster</code> as the target cluster type to deploy to.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>INFO[0393] Transformer CustomClusterSelector Done   
</span></span><span style=display:flex><span>INFO[0393] Transformer KubernetesVersionChanger processing 1 artifacts
</span></span><span style=display:flex><span>INFO[0393] Transformer KubernetesVersionChanger Done
</span></span><span style=display:flex><span>INFO[0393] Created 1 pathMappings and 1 artifacts. Total Path Mappings : 1. Total Artifacts : 1.
</span></span><span style=display:flex><span>INFO[0393] Iteration 3 - 1 artifacts to process
</span></span><span style=display:flex><span>INFO[0393] Transformer Parameterizer processing 1 artifacts
</span></span><span style=display:flex><span>INFO[0393] Transformer Parameterizer Done   
</span></span><span style=display:flex><span>INFO[0393] Plan Transformation done
</span></span><span style=display:flex><span>INFO[0393] Transformed target artifacts can be found at [/Users/user/myproject].
</span></span></code></pre></div><ol start=10><li>The transformation has completed and generated a directory called <code>myproject</code>.</li></ol><blockquote><p><strong>Note:</strong> The name of the output directory is the same as the project name (by default <code>myproject</code>). The project name can be changed using the <code>-n</code> flag.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>customizations   kubernetes-to-kubernetes m2k.plan m2kconfig.yaml   m2kqacache.yaml  myproject
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>$ ls myproject/source
</span></span><span style=display:flex><span>kubernetes-to-kubernetes-versionchanged   kubernetes-to-kubernetes-versionchanged-parameterized
</span></span></code></pre></div><p>The applications can now be deployed to Kubernetes using these generated artifacts.</p><h2 id=exploring-the-output>Exploring the output</h2><p>The full structure of the output directory can be seen by executing the <code>tree</code> command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ tree myproject/
</span></span><span style=display:flex><span>   myproject
</span></span><span style=display:flex><span>  └── source
</span></span><span style=display:flex><span>      ├── kubernetes-to-kubernetes-versionchanged
</span></span><span style=display:flex><span>      │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── api-service.yaml
</span></span><span style=display:flex><span>      │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── redis-service.yaml
</span></span><span style=display:flex><span>      │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>      │   └── web-service.yaml
</span></span><span style=display:flex><span>      └── kubernetes-to-kubernetes-versionchanged-parameterized
</span></span><span style=display:flex><span>          ├── helm-chart
</span></span><span style=display:flex><span>          │   └── move2kube-transformers
</span></span><span style=display:flex><span>          │       ├── Chart.yaml
</span></span><span style=display:flex><span>          │       ├── templates
</span></span><span style=display:flex><span>          │       │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── api-service.yaml
</span></span><span style=display:flex><span>          │       │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── redis-service.yaml
</span></span><span style=display:flex><span>          │       │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>          │       │   └── web-service.yaml
</span></span><span style=display:flex><span>          │       ├── values-dev.yaml
</span></span><span style=display:flex><span>          │       ├── values-prod.yaml
</span></span><span style=display:flex><span>          │       └── values-staging.yaml
</span></span><span style=display:flex><span>          ├── kustomize
</span></span><span style=display:flex><span>          │   ├── base
</span></span><span style=display:flex><span>          │   │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── api-service.yaml
</span></span><span style=display:flex><span>          │   │   ├── kustomization.yaml
</span></span><span style=display:flex><span>          │   │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── redis-service.yaml
</span></span><span style=display:flex><span>          │   │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>          │   │   └── web-service.yaml
</span></span><span style=display:flex><span>          │   └── overlays
</span></span><span style=display:flex><span>          │       ├── dev
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │       │   └── kustomization.yaml
</span></span><span style=display:flex><span>          │       ├── prod
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │       │   └── kustomization.yaml
</span></span><span style=display:flex><span>          │       └── staging
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │           └── kustomization.yaml
</span></span><span style=display:flex><span>          └── openshift-template
</span></span><span style=display:flex><span>              ├── parameters-dev.yaml
</span></span><span style=display:flex><span>              ├── parameters-prod.yaml
</span></span><span style=display:flex><span>              ├── parameters-staging.yaml
</span></span><span style=display:flex><span>              └── template.yaml
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  13 directories, 42 files
</span></span></code></pre></div><p>The <code>myproject/source/kubernetes-to-kubernetes-versionchanged</code> directory has the new Kubernetes YAMLs (deployment/service/ingress/etc.) which are tailored to meet the target cluster requirements.</p><p>Some other things to observe:</p><ul><li>The Helm chart in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/helm-chart</code> directory.</li><li>The Kustomize YAMLs in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/kustomize</code> directory.</li><li>The Openshift Template in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/openshift-template</code> directory.</li></ul><p>For more details on how to customize the parameterization look at the documentation.</p><h2 id=conclusion>Conclusion</h2><p>Follow these steps to complete the tutorial.</p><ol><li>Run <code>move2kube collect -a k8s</code> after logging in to the cluster to collect the cluster-related information inside the <code>m2k_collect</code> folder.</li><li>Copy-paste the generated YAML file inside <code>m2k_collect/cluster/</code> to <a href=https://github.com/konveyor/move2kube-transformers/tree/main/custom-cluster-selector/clusters/>custom-cluster-selector/clusters/</a>.</li><li>While running <code>move2kube plan -s src -c custom-cluster-selector</code> (or transform <code>move2kube transform -s src -c custom-cluster-selector</code>), provide the customization folder to Move2Kube using the <code>-c flag</code>.</li><li>Select the target cluster in the QA during <em>Transform</em> phase. Move2Kube will generate the Kubernetes YAMLs for the target cluster.</li></ol><p>Given Kubernetes YAMLs, this tutorial showed how Move2Kube can create/transform the Kubernetes YAMLs to target a specific cluster.</p><p><a href=https://github.com/konveyor/konveyor.github.io/blob/main/content/Move2Kube/Tutorials/customKubeYAML.md>Source</a></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/perfect-scrollbar.min.js></script><script src=/js/perfect-scrollbar.jquery.min.js></script><script src=/js/jquery.sticky.js></script><script src=/js/featherlight.min.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script><script src=/js/learn.js></script><script src=/js/hugo-learn.js></script><script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>