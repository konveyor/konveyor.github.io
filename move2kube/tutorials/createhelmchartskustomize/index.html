<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.120.4"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Create Helm-charts, Kustomize overlays from Kubernetes Yamls - Documentation for Konveyor projects</title>
<link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Create Helm-charts, Kustomize overlays from Kubernetes Yamls",fileUniqID:"f869ce8b43dc0240752bc67ac08417c0"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/move2kube/tutorials/createhelmchartskustomize/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/konveyor/ title=Konveyor class=dd-item><a href=/konveyor/>Konveyor</a><ul><li data-nav-id=/konveyor/contributetokonveyor/ title="Contributing To Konveyor" class=dd-item><a href=/konveyor/contributetokonveyor/>Contributing To Konveyor</a></li><li data-nav-id=/konveyor/admintasks/ title="Administrator view tasks" class=dd-item><a href=/konveyor/admintasks/>Administrator view tasks</a></li><li data-nav-id=/konveyor/views/ title=Views class=dd-item><a href=/konveyor/views/>Views</a></li><li data-nav-id=/konveyor/instances/ title="Seeding Instances" class=dd-item><a href=/konveyor/instances/>Seeding Instances</a></li><li data-nav-id=/konveyor/installation/ title="Installing Konveyor" class=dd-item><a href=/konveyor/installation/>Installing Konveyor</a></li><li data-nav-id=/konveyor/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/konveyor/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/konveyor/addapps/ title="Adding applications" class=dd-item><a href=/konveyor/addapps/>Adding applications</a></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class="dd-item
parent"><a href=/move2kube/>Move2Kube</a><ul><li data-nav-id=/move2kube/concepts/ title=Concepts class=dd-item><a href=/move2kube/concepts/>Concepts</a></li><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a><ul><li data-nav-id=/move2kube/installation/installweb/ title="Web Interface" class=dd-item><a href=/move2kube/installation/installweb/>Web Interface</a></li><li data-nav-id=/move2kube/installation/installcli/ title="Command line tool" class=dd-item><a href=/move2kube/installation/installcli/>Command line tool</a></li></ul></li><li data-nav-id=/move2kube/commands/ title=Commands class=dd-item><a href=/move2kube/commands/>Commands</a></li><li data-nav-id=/move2kube/transformers/ title=Transformers class=dd-item><a href=/move2kube/transformers/>Transformers</a></li><li data-nav-id=/move2kube/tutorials/ title=Tutorials class="dd-item
parent"><a href=/move2kube/tutorials/>Tutorials</a><ul><li data-nav-id=/move2kube/tutorials/usingcli/ title="Using Move2Kube CLI" class=dd-item><a href=/move2kube/tutorials/usingcli/>Using Move2Kube CLI</a></li><li data-nav-id=/move2kube/tutorials/usingui/ title="Using Move2Kube UI" class=dd-item><a href=/move2kube/tutorials/usingui/>Using Move2Kube UI</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/ title="Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes" class=dd-item><a href=/move2kube/tutorials/cfappstok8/>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</a><ul><li data-nav-id=/move2kube/tutorials/cfappstok8/1collect/ title="1. Collect" class=dd-item><a href=/move2kube/tutorials/cfappstok8/1collect/>1. Collect</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/2plan/ title="2. Plan" class=dd-item><a href=/move2kube/tutorials/cfappstok8/2plan/>2. Plan</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/3transform/ title="3. Transform" class=dd-item><a href=/move2kube/tutorials/cfappstok8/3transform/>3. Transform</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customizeoutput/ title="Customizing the output" class=dd-item><a href=/move2kube/tutorials/customizeoutput/>Customizing the output</a><ul><li data-nav-id=/move2kube/tutorials/customizeoutput/addcustfiledir/ title="Add custom files and directories in custom locations" class=dd-item><a href=/move2kube/tutorials/customizeoutput/addcustfiledir/>Add custom files and directories in custom locations</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ title="Parameterizing custom fields in Helm Chart, Kustomize, OC templates" class=dd-item><a href=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customannotationsyaml/ title="Add custom annotations to Kubernetes YAMLs" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customannotationsyaml/>Add custom annotations to Kubernetes YAMLs</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customgendockerfile/ title="Customize generated Dockerfile and built-in transformer behavior" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customgendockerfile/>Customize generated Dockerfile and built-in transformer behavior</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customkubeyaml/ title="Customize Kubernetes YAMLs to target specific clusters" class=dd-item><a href=/move2kube/tutorials/customkubeyaml/>Customize Kubernetes YAMLs to target specific clusters</a></li><li data-nav-id=/move2kube/tutorials/createhelmchartskustomize/ title="Create Helm-charts, Kustomize overlays from Kubernetes Yamls" class="dd-item active"><a href=/move2kube/tutorials/createhelmchartskustomize/>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</a></li><li data-nav-id=/move2kube/tutorials/createwincontainersnet/ title="Create and deploy Windows .NET containers" class=dd-item><a href=/move2kube/tutorials/createwincontainersnet/>Create and deploy Windows .NET containers</a></li><li data-nav-id=/move2kube/tutorials/migratedeploynetcore/ title="Migrate and deploy .NET Core applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploynetcore/>Migrate and deploy .NET Core applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedockercomposekube/ title="Migrate from Docker Compose to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedockercomposekube/>Migrate from Docker Compose to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedeploycfapps/ title="Migrate and deploy Cloud Foundry applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploycfapps/>Migrate and deploy Cloud Foundry applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/runnoninteractively/ title="Run transforms non-interactively" class=dd-item><a href=/move2kube/tutorials/runnoninteractively/>Run transforms non-interactively</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#exploring-the-output>Exploring the output</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</h1><p>This tutorial will show how to transform a set of Kubernetes YAMLs by parameterizing them by using Move2Kube to generate parameterized Helm charts, Kustomize and Openshift Templates from the Kubernetes YAMLs. Move2Kube can also change the version of Kubernetes resources to target particular clusters.</p><p><strong>Prerequisites</strong></p><ul><li>Move2Kube CLI tool is installed.</li><li>Use a <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/kubernetes-to-kubernetes>kubernetes-to-kubernetes</a> sample. The <code>kubernetes-to-kubernetes</code> directory has some Kubernetes YAMLs that deploy a web app with multiple services. There are three services: a frontend website in PHP, a backend API in Node.JS, and a cache service using Redis.</li></ul><p><strong>Procedure</strong></p><ol><li>Download the <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/kubernetes-to-kubernetes>kubernetes-to-kubernetes</a> sample.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/kubernetes-to-kubernetes -r move2kube-demos
</span></span><span style=display:flex><span>  $ ls kubernetes-to-kubernetes/
</span></span><span style=display:flex><span>  api-deployment.yaml  api-service.yaml  redis-deployment.yaml  redis-service.yaml  web-deployment.yaml  web-ingress.yaml  web-service.yaml
</span></span></code></pre></div><ol start=2><li>Run <code>move2kube plan -s kubernetes-to-kubernetes/</code> to generate a plan file.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube plan -s kubernetes-to-kubernetes/
</span></span><span style=display:flex><span>INFO[0000] Configuration loading done
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Base Directory
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [ComposeAnalyser] Done
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [CloudFoundry] Done
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Planning transformation
</span></span><span style=display:flex><span>INFO[0000] [DockerfileDetector] Done
</span></span><span style=display:flex><span>INFO[0000] [Base Directory] Identified 0 named services and 0 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Base Directory done
</span></span><span style=display:flex><span>INFO[0000] Planning Transformation - Directory Walk
</span></span><span style=display:flex><span>INFO[0000] Identified 1 named services and 0 to-be-named services in .
</span></span><span style=display:flex><span>INFO[0000] Identified 1 named services and 0 to-be-named services in .
</span></span><span style=display:flex><span>INFO[0000] Transformation planning - Directory Walk done
</span></span><span style=display:flex><span>INFO[0000] [Directory Walk] Identified 1 named services and 1 to-be-named services
</span></span><span style=display:flex><span>INFO[0000] [Named Services] Identified 1 named services
</span></span><span style=display:flex><span>INFO[0000] No of services identified : 1
</span></span><span style=display:flex><span>INFO[0000] Plan can be found at [/home/user/m2k.plan].
</span></span></code></pre></div><ol start=3><li>Look at the generated plan file in YAML format.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>kubernetes-to-kubernetes	m2k.plan
</span></span><span style=display:flex><span>$ cat m2k.plan
</span></span></code></pre></div><p>Notice that Move2Kube has detected all the different services, one for each web app.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>aapiVersion</span>: <span style=color:#ae81ff>move2kube.konveyor.io/v1alpha1</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Plan</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myproject</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>sourceDir</span>: <span style=color:#ae81ff>kubernetes-to-kubernetes</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>myproject</span>:
</span></span><span style=display:flex><span>       - <span style=color:#f92672>transformerName</span>: <span style=color:#ae81ff>KubernetesVersionChanger</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>type</span>: <span style=color:#ae81ff>KubernetesOrgYamlsInSource</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>KubernetesYamls</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>ServiceDirPath</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>       - <span style=color:#f92672>transformerName</span>: <span style=color:#ae81ff>Parameterizer</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>KubernetesYamls</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>ServiceDirPath</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>transformers</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>Buildconfig</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/buildconfig/buildconfig.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CloudFoundry</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/cloudfoundry/cloudfoundry.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ClusterSelector</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/clusterselector/clusterselector.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ComposeAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/compose/composeanalyser/composeanalyser.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ComposeGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/compose/composegenerator/composegenerator.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ContainerImagesPushScriptGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/containerimage/containerimagespushscript/containerimagespushscript.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileDetector</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerfiledetector/dockerfiledetector.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileImageBuildScript</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerimagebuildscript/dockerfilebuildscriptgenerator.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DockerfileParser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfile/dockerfileparser/dockerfileparser.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>DotNetCore-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/dotnetcore/dotnetcore.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>EarAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/earanalyser/ear.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>EarRouter</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/earrouter/earrouter.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Golang-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/golang/golang.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Gradle</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/gradle/gradle.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Jar</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/jar/jar.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Jboss</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/jboss/jboss.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Knative</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/knative/knative.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Kubernetes</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/kubernetes/kubernetes.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>KubernetesVersionChanger</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/kubernetesversionchanger/kubernetesversionchanger.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Liberty</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/liberty/liberty.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Maven</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/maven/maven.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Nodejs-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/nodejs/nodejs.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>PHP-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/php/php.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Parameterizer</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/parameterizer/parameterizer.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Python-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/python/python.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ReadMeGenerator</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/readmegenerator/readmegenerator.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Ruby-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/ruby/ruby.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Rust-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/rust/rust.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Tekton</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/kubernetes/tekton/tekton.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Tomcat</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/tomcat/tomcat.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WarAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/waranalyser/war.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WarRouter</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/warrouter/warrouter.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinConsoleApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winconsole/winconsole.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinSLWebApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winsilverlightweb/winsilverlightweb.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>WinWebApp-Dockerfile</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/windows/winweb/winweb.yaml</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>ZuulAnalyser</span>: <span style=color:#ae81ff>m2kassets/built-in/transformers/dockerfilegenerator/java/zuul/zuulanalyser.yaml</span>
</span></span></code></pre></div><ol start=4><li>Run the transformation using <code>move2kube transform</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform
</span></span><span style=display:flex><span>INFO[0000] Detected a plan file at path /home/user/m2k.plan. Will transform using this plan.
</span></span><span style=display:flex><span>? Select all transformer types that you are interested in:
</span></span><span style=display:flex><span>ID: move2kube.transformers.types
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Services that don&#39;t support any of the transformer types you are interested in will be ignored.]
</span></span><span style=display:flex><span> ComposeAnalyser, PHP-Dockerfile, ReadMeGenerator, Ruby-Dockerfile, Tekton, Buildconfig, Golang-Dockerfile, Jar, Knative, Nodejs-Dockerfile, Parameterizer, CloudFoundry, DockerfileDetector, Kubernetes, Maven, WinWebApp-Dockerfile, Gradle, KubernetesVersionChanger, WarAnalyser, Rust-Dockerfile, WarRouter, ZuulAnalyser, DotNetCore-Dockerfile,EarRouter, Liberty, Python-Dockerfile, Tomcat, ContainerImagesPushScriptGenerator, DockerfileImageBuildScript, DockerfileParser, ClusterSelector, ComposeGenerator,   EarAnalyser, Jboss, WinConsoleApp-Dockerfile, WinSLWebApp-Dockerfile
</span></span><span style=display:flex><span>? Select all services that are needed:
</span></span><span style=display:flex><span>ID: move2kube.services.[].enable
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[The services unselected here will be ignored.]
</span></span></code></pre></div><p><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the remaining output.</span></div><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span> myproject
</span></span><span style=display:flex><span>INFO[0005] Starting Plan Transformation
</span></span><span style=display:flex><span>INFO[0005] Iteration 1
</span></span><span style=display:flex><span>INFO[0005] Iteration 2 - 1 artifacts to process
</span></span><span style=display:flex><span>INFO[0005] Transformer ClusterSelector processing 1 artifacts
</span></span><span style=display:flex><span>? Choose the cluster type:
</span></span><span style=display:flex><span>ID: move2kube.target.clustertype
</span></span><span style=display:flex><span>Hints:
</span></span><span style=display:flex><span>[Choose the cluster type you would like to target]
</span></span><span style=display:flex><span> Kubernetes
</span></span><span style=display:flex><span>INFO[0006] Transformer ClusterSelector Done
</span></span><span style=display:flex><span>INFO[0006] Transformer KubernetesVersionChanger processing 1 artifacts
</span></span><span style=display:flex><span>INFO[0006] Transformer KubernetesVersionChanger Done
</span></span><span style=display:flex><span>INFO[0006] Created 1 pathMappings and 1 artifacts. Total Path Mappings : 1. Total Artifacts : 1.
</span></span><span style=display:flex><span>INFO[0006] Iteration 3 - 1 artifacts to process
</span></span><span style=display:flex><span>INFO[0006] Transformer Parameterizer processing 1 artifacts
</span></span><span style=display:flex><span>INFO[0006] Transformer Parameterizer Done
</span></span><span style=display:flex><span>INFO[0006] Plan Transformation done
</span></span><span style=display:flex><span>INFO[0006] Transformed target artifacts can be found at [/home/user/myproject].
</span></span></code></pre></div></div></div>It will take a few minutes for it to finish processing and generate a directory called <code>myproject</code>. The name of the output directory is the same as the project name (by default <code>myproject</code>). The project name can be changed using the <code>-n</code> flag.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ ls
</span></span><span style=display:flex><span>  kubernetes-to-kubernetes  m2k.plan  m2kconfig.yaml  m2kqacache.yaml  myproject
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  $ ls myproject/
</span></span><span style=display:flex><span>  source
</span></span></code></pre></div><p>The applications can now be deployed to Kubernetes using these generated artifacts.</p><h2 id=exploring-the-output>Exploring the output</h2><p>The full structure of the output directory can be seen by executing the <code>tree</code> command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>  $ cd myproject/
</span></span><span style=display:flex><span>  $ tree
</span></span><span style=display:flex><span>  .
</span></span><span style=display:flex><span>   └── source
</span></span><span style=display:flex><span>      ├── kubernetes-to-kubernetes-versionchanged
</span></span><span style=display:flex><span>      │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── api-service.yaml
</span></span><span style=display:flex><span>      │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── redis-service.yaml
</span></span><span style=display:flex><span>      │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>      │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>      │   └── web-service.yaml
</span></span><span style=display:flex><span>      └── kubernetes-to-kubernetes-versionchanged-parameterized
</span></span><span style=display:flex><span>          ├── helm-chart
</span></span><span style=display:flex><span>          │   └── myproject
</span></span><span style=display:flex><span>          │       ├── Chart.yaml
</span></span><span style=display:flex><span>          │       ├── templates
</span></span><span style=display:flex><span>          │       │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── api-service.yaml
</span></span><span style=display:flex><span>          │       │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── redis-service.yaml
</span></span><span style=display:flex><span>          │       │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>          │       │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>          │       │   └── web-service.yaml
</span></span><span style=display:flex><span>          │       ├── values-dev.yaml
</span></span><span style=display:flex><span>          │       ├── values-prod.yaml
</span></span><span style=display:flex><span>          │       └── values-staging.yaml
</span></span><span style=display:flex><span>          ├── kustomize
</span></span><span style=display:flex><span>          │   ├── base
</span></span><span style=display:flex><span>          │   │   ├── api-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── api-service.yaml
</span></span><span style=display:flex><span>          │   │   ├── kustomization.yaml
</span></span><span style=display:flex><span>          │   │   ├── redis-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── redis-service.yaml
</span></span><span style=display:flex><span>          │   │   ├── web-deployment.yaml
</span></span><span style=display:flex><span>          │   │   ├── web-ingress.yaml
</span></span><span style=display:flex><span>          │   │   └── web-service.yaml
</span></span><span style=display:flex><span>          │   └── overlays
</span></span><span style=display:flex><span>          │       ├── dev
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │       │   └── kustomization.yaml
</span></span><span style=display:flex><span>          │       ├── prod
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │       │   ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │       │   └── kustomization.yaml
</span></span><span style=display:flex><span>          │       └── staging
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-api.yaml
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-redis.yaml
</span></span><span style=display:flex><span>          │           ├── apps-v1-deployment-web.yaml
</span></span><span style=display:flex><span>          │           └── kustomization.yaml
</span></span><span style=display:flex><span>          └── openshift-template
</span></span><span style=display:flex><span>              ├── parameters-dev.yaml
</span></span><span style=display:flex><span>              ├── parameters-prod.yaml
</span></span><span style=display:flex><span>              ├── parameters-staging.yaml
</span></span><span style=display:flex><span>              └── template.yaml
</span></span><span style=display:flex><span>  13 directories, 42 files
</span></span></code></pre></div><p>Some things to note:</p><ul><li>The Helm chart in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/helm-chart</code> directory.</li><li>The Kustomize YAMLs in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/kustomize</code> directory.</li><li>The Openshift Template in the <code>source/kubernetes-to-kubernetes-versionchanged-parameterized/openshift-template</code> directory.</li><li>In each case, there are three environments <code>dev</code>, <code>staging</code> and <code>prod</code>.</li><li>It is possible to have different parameterizations for each environment.</li></ul><p>Notice that the directory name has <code>versionchanged</code> in it. This is because two transformers are currently in play here:</p><ul><li>The <code>KubernetesVersionChanger</code> transformer, which was asking for the Kubernetes version to target, and which created the version changed YAMLs to suit the target cluster supported kinds and versions.</li><li>The <code>Parameterizer</code> transformer, which was taking the version changed YAMLs and creating Helm Charts, Kustomize overlays, and OC templates.</li></ul><p>If the intention was to retain the kind and verisons of Kubernetes YAMLs, disable the <code>KubernetesVersionChanger</code> transformer either in the QA, configuration, or in the plan, and then the YAMLs will be parameterized as is.</p><p>For more details on how to customize the parameterization that Move2Kube does look at the <a href=/transformers/purpose-built/parameterizer>parameterization documentation</a>.</p><h2 id=conclusion>Conclusion</h2><p>Given Kubernetes YAMLs, Move2Kube helps parameterize them and generate Helm charts, Kustomize, Openshift Templates, etc.
Move2Kube is also capable of changing the versions of various Kubernetes resources to match the target cluster.</p><p><a href=https://github.com/konveyor/konveyor.github.io/blob/main/content/Move2Kube/Tutorials/createHelmChartsKustomize.md>Source</a></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/perfect-scrollbar.min.js></script><script src=/js/perfect-scrollbar.jquery.min.js></script><script src=/js/jquery.sticky.js></script><script src=/js/featherlight.min.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script><script src=/js/learn.js></script><script src=/js/hugo-learn.js></script><script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>