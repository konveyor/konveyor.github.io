<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.120.4"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Add custom files and directories in custom locations - Documentation for Konveyor projects</title>
<link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Add custom files and directories in custom locations",fileUniqID:"9295472d5f874dd5034dd5196cdb0863"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/move2kube/tutorials/customizeoutput/addcustfiledir/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/konveyor/ title=Konveyor class=dd-item><a href=/konveyor/>Konveyor</a><ul><li data-nav-id=/konveyor/contributetokonveyor/ title="Contributing To Konveyor" class=dd-item><a href=/konveyor/contributetokonveyor/>Contributing To Konveyor</a></li><li data-nav-id=/konveyor/admintasks/ title="Administrator view tasks" class=dd-item><a href=/konveyor/admintasks/>Administrator view tasks</a></li><li data-nav-id=/konveyor/views/ title=Views class=dd-item><a href=/konveyor/views/>Views</a></li><li data-nav-id=/konveyor/instances/ title="Seeding Instances" class=dd-item><a href=/konveyor/instances/>Seeding Instances</a></li><li data-nav-id=/konveyor/installation/ title="Installing Konveyor" class=dd-item><a href=/konveyor/installation/>Installing Konveyor</a></li><li data-nav-id=/konveyor/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/konveyor/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/konveyor/addapps/ title="Adding applications" class=dd-item><a href=/konveyor/addapps/>Adding applications</a></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class="dd-item
parent"><a href=/move2kube/>Move2Kube</a><ul><li data-nav-id=/move2kube/concepts/ title=Concepts class=dd-item><a href=/move2kube/concepts/>Concepts</a></li><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a><ul><li data-nav-id=/move2kube/installation/installweb/ title="Web Interface" class=dd-item><a href=/move2kube/installation/installweb/>Web Interface</a></li><li data-nav-id=/move2kube/installation/installcli/ title="Command line tool" class=dd-item><a href=/move2kube/installation/installcli/>Command line tool</a></li></ul></li><li data-nav-id=/move2kube/commands/ title=Commands class=dd-item><a href=/move2kube/commands/>Commands</a></li><li data-nav-id=/move2kube/transformers/ title=Transformers class=dd-item><a href=/move2kube/transformers/>Transformers</a></li><li data-nav-id=/move2kube/tutorials/ title=Tutorials class="dd-item
parent"><a href=/move2kube/tutorials/>Tutorials</a><ul><li data-nav-id=/move2kube/tutorials/usingcli/ title="Using Move2Kube CLI" class=dd-item><a href=/move2kube/tutorials/usingcli/>Using Move2Kube CLI</a></li><li data-nav-id=/move2kube/tutorials/usingui/ title="Using Move2Kube UI" class=dd-item><a href=/move2kube/tutorials/usingui/>Using Move2Kube UI</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/ title="Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes" class=dd-item><a href=/move2kube/tutorials/cfappstok8/>Migrating Enterprise Scale Cloud Foundry Apps to Kubernetes</a><ul><li data-nav-id=/move2kube/tutorials/cfappstok8/1collect/ title="1. Collect" class=dd-item><a href=/move2kube/tutorials/cfappstok8/1collect/>1. Collect</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/2plan/ title="2. Plan" class=dd-item><a href=/move2kube/tutorials/cfappstok8/2plan/>2. Plan</a></li><li data-nav-id=/move2kube/tutorials/cfappstok8/3transform/ title="3. Transform" class=dd-item><a href=/move2kube/tutorials/cfappstok8/3transform/>3. Transform</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customizeoutput/ title="Customizing the output" class="dd-item
parent"><a href=/move2kube/tutorials/customizeoutput/>Customizing the output</a><ul><li data-nav-id=/move2kube/tutorials/customizeoutput/addcustfiledir/ title="Add custom files and directories in custom locations" class="dd-item active"><a href=/move2kube/tutorials/customizeoutput/addcustfiledir/>Add custom files and directories in custom locations</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/ title="Parameterizing custom fields in Helm Chart, Kustomize, OC templates" class=dd-item><a href=/move2kube/tutorials/customizeoutput/paramcustomfieldshelm/>Parameterizing custom fields in Helm Chart, Kustomize, OC templates</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customannotationsyaml/ title="Add custom annotations to Kubernetes YAMLs" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customannotationsyaml/>Add custom annotations to Kubernetes YAMLs</a></li><li data-nav-id=/move2kube/tutorials/customizeoutput/customgendockerfile/ title="Customize generated Dockerfile and built-in transformer behavior" class=dd-item><a href=/move2kube/tutorials/customizeoutput/customgendockerfile/>Customize generated Dockerfile and built-in transformer behavior</a></li></ul></li><li data-nav-id=/move2kube/tutorials/customkubeyaml/ title="Customize Kubernetes YAMLs to target specific clusters" class=dd-item><a href=/move2kube/tutorials/customkubeyaml/>Customize Kubernetes YAMLs to target specific clusters</a></li><li data-nav-id=/move2kube/tutorials/createhelmchartskustomize/ title="Create Helm-charts, Kustomize overlays from Kubernetes Yamls" class=dd-item><a href=/move2kube/tutorials/createhelmchartskustomize/>Create Helm-charts, Kustomize overlays from Kubernetes Yamls</a></li><li data-nav-id=/move2kube/tutorials/createwincontainersnet/ title="Create and deploy Windows .NET containers" class=dd-item><a href=/move2kube/tutorials/createwincontainersnet/>Create and deploy Windows .NET containers</a></li><li data-nav-id=/move2kube/tutorials/migratedeploynetcore/ title="Migrate and deploy .NET Core applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploynetcore/>Migrate and deploy .NET Core applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedockercomposekube/ title="Migrate from Docker Compose to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedockercomposekube/>Migrate from Docker Compose to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/migratedeploycfapps/ title="Migrate and deploy Cloud Foundry applications to Kubernetes" class=dd-item><a href=/move2kube/tutorials/migratedeploycfapps/>Migrate and deploy Cloud Foundry applications to Kubernetes</a></li><li data-nav-id=/move2kube/tutorials/runnoninteractively/ title="Run transforms non-interactively" class=dd-item><a href=/move2kube/tutorials/runnoninteractively/>Run transforms non-interactively</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Add custom files and directories in custom locations</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#anatomy-of-transformer-in-add-custom-files-directories-in-custom-locations>Anatomy of transformer in add-custom-files-directories-in-custom-locations</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Add custom files and directories in custom locations</h1><p>Move2Kube allows custom template files to be added to any directory. This example illustrates this by adding a custom Helm chart.</p><ol><li>Start by creating an empty workspace directory named <code>workspace</code> and make it the current working directory. Asume all commands are executed within this directory.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ mkdir workspace <span style=color:#f92672>&amp;&amp;</span> cd workspace
</span></span></code></pre></div><ol start=2><li>Use the <a href=https://github.com/konveyor/move2kube-demos/tree/main/samples/enterprise-app>enterprise-app</a> as input for this flow.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d samples/enterprise-app/src -r move2kube-demos  
</span></span><span style=display:flex><span>$ ls src
</span></span><span style=display:flex><span>README.md		config-utils		customers	docs			frontend		gateway			orders
</span></span></code></pre></div><p>In this project, all the apps have a pom.xml file. Use a custom transformer to place a Helm chart created from a template into each of those project directories.</p><ol start=3><li>Use the Starlark based custom transformer located <a href=https://github.com/konveyor/move2kube-transformers/tree/main/add-custom-files-directories-in-custom-locations>here</a>. We copy it into the <code>customizations</code> sub-directory.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ curl https://move2kube.konveyor.io/scripts/download.sh | bash -s -- -d add-custom-files-directories-in-custom-locations -r move2kube-transformers -o customizations
</span></span></code></pre></div><ol start=4><li>Transform using this customization and specify the customization using the <code>-c</code> flag.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ move2kube transform -s src/ -c customizations/ --qa-skip
</span></span></code></pre></div><p>Once the output is generated, one Helm chart was generated for each service and placed within the service directory. Also, note that every Helm chart project is named after the service it is meant for. The contents are shown below for reference:</p><pre tabindex=0><code>    {% raw %}
        $ tree myproject
            myproject/
            ├── config-utils
            │   ├── helm-chart
            │   │   └── config-utils
            │   │       ├── Chart.yaml
            │   │       ├── templates
            │   │       │   ├── config-utils-deployment.yaml
            │   │       │   ├── config-utils-ingress.yaml
            │   │       │   └── config-utils-service.yaml
            │   │       └── values.yaml
            │   ├── pom.xml
            │   └── src
            │       └── main
            │           └── java
            │               └── io
            │                   └── konveyor
            │                       └── demo
            │                           └── config
            │                               └── ApplicationConfiguration.java
</code></pre><div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>Click to see the rest of the output.</span></div><div class=expand-content style=display:none><pre tabindex=0><code>            ├── customers
            │   ├── Makefile
            │   ├── helm-chart
            │   │   └── customers
            │   │       ├── Chart.yaml
            │   │       ├── templates
            │   │       │   ├── customers-deployment.yaml
            │   │       │   ├── customers-ingress.yaml
            │   │       │   └── customers-service.yaml
            │   │       └── values.yaml
            │   ├── pom.xml
            │   └── src
            │       └── main
            │           ├── java
            │           │   └── io
            │           │       └── konveyor
            │           │           └── demo
            │           │               └── ordermanagement
            │           │                   ├── OrderManagementAppInitializer.java
            │           │                   ├── config
            │           │                   │   ├── PersistenceConfig.java
            │           │                   │   └── WebConfig.java
            │           │                   ├── controller
            │           │                   │   └── CustomerController.java
            │           │                   ├── exception
            │           │                   │   ├── ResourceNotFoundException.java
            │           │                   │   └── handler
            │           │                   │       └── ExceptionHandlingController.java
            │           │                   ├── model
            │           │                   │   └── Customer.java
            │           │                   ├── repository
            │           │                   │   └── CustomerRepository.java
            │           │                   └── service
            │           │                       └── CustomerService.java
            │           └── resources
            │               ├── import.sql
            │               └── persistence.properties
            └── gateway
                ├── helm-chart
                │   └── snowdrop-dependencies
                │       ├── Chart.yaml
                │       ├── templates
                │       │   ├── snowdrop-dependencies-deployment.yaml
                │       │   ├── snowdrop-dependencies-ingress.yaml
                │       │   └── snowdrop-dependencies-service.yaml
                │       └── values.yaml
                ├── manifest.yml
                ├── pom.xml
                └── src
                    ├── main
                    │   ├── java
                    │   │   ├── META-INF
                    │   │   │   └── MANIFEST.MF
                    │   │   └── io
                    │   │       └── konveyor
                    │   │           └── demo
                    │   │               └── gateway
                    │   │                   ├── Application.java
                    │   │                   ├── command
                    │   │                   │   └── ProductCommand.java
                    │   │                   ├── controller
                    │   │                   │   ├── CustomersController.java
                    │   │                   │   ├── InventoryController.java
                    │   │                   │   └── OrdersController.java
                    │   │                   ├── exception
                    │   │                   │   ├── ResourceNotFoundException.java
                    │   │                   │   └── handler
                    │   │                   │       └── ExceptionHandlingController.java
                    │   │                   ├── model
                    │   │                   │   ├── Customer.java
                    │   │                   │   ├── Order.java
                    │   │                   │   ├── OrderItem.java
                    │   │                   │   ├── OrderSummary.java
                    │   │                   │   └── Product.java
                    │   │                   ├── repository
                    │   │                   │   ├── CustomerRepository.java
                    │   │                   │   ├── GenericRepository.java
                    │   │                   │   ├── InventoryRepository.java
                    │   │                   │   └── OrderRepository.java
                    │   │                   ├── serialization
                    │   │                   │   ├── CustomerDeserializer.java
                    │   │                   │   └── ProductDeserializer.java
                    │   │                   └── service
                    │   │                       ├── CustomersService.java
                    │   │                       ├── InventoryService.java
                    │   │                       └── OrdersService.java
                    │   └── resources
                    │       ├── application-local.properties
                    │       ├── application-openshift.properties
                    │       └── bootstrap.properties
                    └── test
                        ├── java
                        │   └── io
                        │       └── konveyor
                        │           └── demo
                        │               └── gateway
                        │                   ├── controller
                        │                   │   └── OrdersControllerTest.java
                        │                   ├── model
                        │                   │   └── OrderTest.java
                        │                   ├── repository
                        │                   │   ├── CustomerRepositoryTest.java
                        │                   │   ├── InventoryRepositoryTest.java
                        │                   │   └── OrderRepositoryTest.java
                        │                   └── service
                        │                       └── OrdersServiceTest.java
                        └── resources
                            ├── application-test.properties
                            └── bootstrap.properties
    {% endraw %}
</code></pre></div></div><h2 id=anatomy-of-transformer-in-add-custom-files-directories-in-custom-locations>Anatomy of transformer in add-custom-files-directories-in-custom-locations</h2><p>This custom transformer is more advanced compared to previous cases. It uses a Starlark script (<code>customhelmchartgen.star</code>) and several templatization features to achieve the per-service Helm chart requirement. Notice the <code>{% raw %}{{\ .ServiceName\ }}{% endraw %}</code> template in the file names of custom Helm chart template in the <code>templates</code> sub-directory. The contents of the <code>add-custom-files-directories-in-custom-locations</code> custom transformer are shown below:</p><pre tabindex=0><code>{% raw %}customization/add-custom-files-directories-in-custom-locations/
├── customhelmchartgen.star
├── customhelmchartgen.yaml
└── templates
    └── helm-chart
        └── {{\ .ServiceName\ }}
            ├── Chart.yaml
            ├── templates
            │   ├── {{\ .ServiceName\ }}-deployment.yaml
            │   ├── {{\ .ServiceName\ }}-ingress.yaml
            │   └── {{\ .ServiceName\ }}-service.yaml
            └── values.yaml{% endraw %}
</code></pre><p>The code of the Starlark script (<code>cat customizations/add-custom-files-directories-in-custom-locations/customhelmchartgen.star</code>) is shown below. At a high level, the custom transformer detects a Java project if it finds <code>pom.xml</code> in the directory when the <code>directory_detect()</code> function is invoked in the detect phase. Once the Java project is detected, the corresponding project path and service name are passed to the transform phase through Move2Kube.</p><p>In the transform phase, the <code>transform()</code> function is invoked with the discovered service artifacts from the detect phase. These artifacts are used to fill the Helm chart templates shown above and produced as the output in a per-service directory structure.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>{<span style=color:#f92672>%</span> raw <span style=color:#f92672>%</span>}PomFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pom.xml&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Performs the detection of pom file and extracts service name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>directory_detect</span>(dir):
</span></span><span style=display:flex><span>    dataFilePath <span style=color:#f92672>=</span> fs<span style=color:#f92672>.</span>pathjoin(dir, PomFile)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> fs<span style=color:#f92672>.</span>exists(dataFilePath):
</span></span><span style=display:flex><span>        serviceName <span style=color:#f92672>=</span> getServiceName(dataFilePath)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>  {serviceName: [{
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;paths&#34;</span>: {<span style=color:#e6db74>&#34;ProjectPath&#34;</span>: [dir]} }] }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Creates the customized helm chart for every service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>transform</span>(new_artifacts, old_artifacts):
</span></span><span style=display:flex><span>    pathMappings <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    artifacts <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    pathTemplate <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;{{ SourceRel .ServiceFsPath }}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> v <span style=color:#f92672>in</span> new_artifacts:
</span></span><span style=display:flex><span>        serviceName <span style=color:#f92672>=</span> v[<span style=color:#e6db74>&#34;configs&#34;</span>][<span style=color:#e6db74>&#34;Service&#34;</span>][<span style=color:#e6db74>&#34;serviceName&#34;</span>]
</span></span><span style=display:flex><span>        dir <span style=color:#f92672>=</span> v[<span style=color:#e6db74>&#39;paths&#39;</span>][<span style=color:#e6db74>&#39;ProjectPath&#39;</span>][<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        <span style=color:#75715e># Create a path template for the service</span>
</span></span><span style=display:flex><span>        pathTemplateName <span style=color:#f92672>=</span> serviceName<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#34;-&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;path&#39;</span>
</span></span><span style=display:flex><span>        tplPathData <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;ServiceFsPath&#39;</span>: dir, <span style=color:#e6db74>&#39;PathTemplateName&#39;</span>: pathTemplateName}
</span></span><span style=display:flex><span>        pathMappings<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#e6db74>&#39;PathTemplate&#39;</span>, \
</span></span><span style=display:flex><span>                            <span style=color:#e6db74>&#39;sourcePath&#39;</span>: pathTemplate, \
</span></span><span style=display:flex><span>                            <span style=color:#e6db74>&#39;templateConfig&#39;</span>: tplPathData})
</span></span><span style=display:flex><span>        <span style=color:#75715e># Since the helm chart uses the same templating character {{ }} as Golang templates,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># we use `SpecialTemplate` type here where the templating character is &lt;~ ~&gt;.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The `Template` type can be used for all normal cases</span>
</span></span><span style=display:flex><span>        pathMappings<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#e6db74>&#39;SpecialTemplate&#39;</span>, \
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;destinationPath&#39;</span>: <span style=color:#e6db74>&#34;{{ .&#34;</span> <span style=color:#f92672>+</span> pathTemplateName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; }}&#34;</span>, \
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;templateConfig&#39;</span>: {<span style=color:#e6db74>&#39;ServiceFsPath&#39;</span>: dir, <span style=color:#e6db74>&#39;ServiceName&#39;</span>: serviceName}})
</span></span><span style=display:flex><span>        pathMappings<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#e6db74>&#39;Source&#39;</span>, \
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;sourcePath&#39;</span>: <span style=color:#e6db74>&#34;{{ .&#34;</span> <span style=color:#f92672>+</span> pathTemplateName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; }}&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;destinationPath&#39;</span>: <span style=color:#e6db74>&#34;{{ .&#34;</span> <span style=color:#f92672>+</span> pathTemplateName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; }}&#34;</span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {<span style=color:#e6db74>&#39;pathMappings&#39;</span>: pathMappings, <span style=color:#e6db74>&#39;artifacts&#39;</span>: artifacts}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extracts service name from pom file</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>getServiceName</span>(filePath):
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> fs<span style=color:#f92672>.</span>read(filePath)
</span></span><span style=display:flex><span>    lines <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>splitlines()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> l <span style=color:#f92672>in</span> lines:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;artifactId&#39;</span> <span style=color:#f92672>in</span> l:
</span></span><span style=display:flex><span>            t <span style=color:#f92672>=</span> l<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;&gt;&#39;</span>)
</span></span><span style=display:flex><span>            t2 <span style=color:#f92672>=</span> t[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;&lt;&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> t2[<span style=color:#ae81ff>0</span>]{<span style=color:#f92672>%</span> endraw <span style=color:#f92672>%</span>}
</span></span></code></pre></div><p><a href=https://github.com/konveyor/konveyor.github.io/blob/main/content/Move2Kube/Tutorials/CustomizeOutput/addCustFileDir.md>Source</a></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/perfect-scrollbar.min.js></script><script src=/js/perfect-scrollbar.jquery.min.js></script><script src=/js/jquery.sticky.js></script><script src=/js/featherlight.min.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script><script src=/js/learn.js></script><script src=/js/hugo-learn.js></script><script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>